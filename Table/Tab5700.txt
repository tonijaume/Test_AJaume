OBJECT Table 5700 Stockkeeping Unit
{
  OBJECT-PROPERTIES
  {
    Date=14/08/09;
    Time=12:00:00;
    Version List=NAVW16.00.01,NAVES4.00.02;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               IF ("Variant Code" = '') AND
                  ("Location Code" = '')
               THEN
                 ERROR(
                   Text000,
                   FIELDCAPTION("Location Code"),FIELDCAPTION("Variant Code"),TABLECAPTION);

               "Last Date Modified" := TODAY;
               PlanningAssignment.AssignOne("Item No.","Variant Code","Location Code",WORKDATE);
             END;

    OnModify=BEGIN
               "Last Date Modified" := TODAY;
               PlanningAssignment.SKUChange(Rec,xRec);
             END;

    OnDelete=VAR
               StockkeepingCommentLine@1000 : Record 5701;
             BEGIN
               StockkeepingCommentLine.SETRANGE("Item No.","Item No.");
               StockkeepingCommentLine.SETRANGE("Variant Code","Variant Code");
               StockkeepingCommentLine.SETRANGE("Location Code","Location Code");
               StockkeepingCommentLine.DELETEALL;
             END;

    OnRename=BEGIN
               IF ("Variant Code" = '') AND
                  ("Location Code" = '')
               THEN
                 ERROR(
                   Text000,
                   FIELDCAPTION("Location Code"),FIELDCAPTION("Variant Code"),TABLECAPTION);

               "Last Date Modified" := TODAY;
             END;

    CaptionML=[ENU=Stockkeeping Unit;
               ESP=Ud. de almacenam.];
    LookupFormID=Form5701;
    DrillDownFormID=Form5701;
  }
  FIELDS
  {
    { 1   ;   ;Item No.            ;Code20        ;TableRelation=Item;
                                                   OnValidate=VAR
                                                                Item@1000 : Record 27;
                                                              BEGIN
                                                                IF "Item No." = xRec."Item No." THEN
                                                                  EXIT;

                                                                IF Item.GET("Item No.") THEN BEGIN;
                                                                  "Shelf No." := Item."Shelf/Bin No.";
                                                                  "Vendor No." := Item."Vendor No.";
                                                                  "Vendor Item No." := Item."Vendor Item No.";
                                                                  "Lead Time Calculation" := Item."Lead Time Calculation";
                                                                  "Reorder Point" := Item."Reorder Point";
                                                                  "Maximum Inventory" := Item."Maximum Inventory";
                                                                  "Reorder Quantity" := Item."Reorder Quantity";
                                                                  "Reordering Policy" := Item."Reordering Policy";
                                                                  "Include Inventory" := Item."Include Inventory";
                                                                  "Manufacturing Policy" := Item."Manufacturing Policy";
                                                                  "Discrete Order Quantity" := Item."Discrete Order Quantity";
                                                                  "Minimum Order Quantity" := Item."Minimum Order Quantity";
                                                                  "Maximum Order Quantity" := Item."Maximum Order Quantity";
                                                                  "Safety Stock Quantity" := Item."Safety Stock Quantity";
                                                                  "Order Multiple" := Item."Order Multiple";
                                                                  "Safety Lead Time" := Item."Safety Lead Time";
                                                                  "Flushing Method" := Item."Flushing Method";
                                                                  "Replenishment System" := Item."Replenishment System";
                                                                  "Reorder Cycle" := Item."Reorder Cycle";
                                                                  "Last Direct Cost" := Item."Last Direct Cost";
                                                                  "Standard Cost" := Item."Standard Cost";
                                                                END;
                                                                CALCFIELDS(Description,"Description 2","Bill of Materials",Inventory);
                                                              END;

                                                   CaptionML=[ENU=Item No.;
                                                              ESP=N§ producto];
                                                   NotBlank=Yes }
    { 2   ;   ;Variant Code        ;Code10        ;TableRelation="Item Variant".Code WHERE (Item No.=FIELD(Item No.));
                                                   OnValidate=BEGIN
                                                                CALCFIELDS(Inventory);
                                                              END;

                                                   CaptionML=[ENU=Variant Code;
                                                              ESP=C¢d. variante] }
    { 3   ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   OnValidate=BEGIN
                                                                IF "Location Code" = '' THEN
                                                                  VALIDATE("Replenishment System");
                                                                CALCFIELDS(Inventory);
                                                              END;

                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 4   ;   ;Description         ;Text30        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item.Description WHERE (No.=FIELD(Item No.)));
                                                   CaptionML=[ENU=Description;
                                                              ESP=Descripci¢n];
                                                   Editable=No }
    { 5   ;   ;Description 2       ;Text30        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item."Description 2" WHERE (No.=FIELD(Item No.)));
                                                   CaptionML=[ENU=Description 2;
                                                              ESP=Descripci¢n 2];
                                                   Editable=No }
    { 6   ;   ;Bill of Materials   ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("BOM Component" WHERE (Parent Item No.=FIELD(Item No.)));
                                                   CaptionML=[ENU=Bill of Materials;
                                                              ESP=Lista de materiales];
                                                   Editable=No }
    { 12  ;   ;Shelf No.           ;Code10        ;CaptionML=[ENU=Shelf No.;
                                                              ESP=N§ estante] }
    { 22  ;   ;Unit Cost           ;Decimal       ;OnValidate=BEGIN
                                                                Item.GET("Item No.");
                                                                IF (Item."Costing Method" = Item."Costing Method"::Standard) THEN
                                                                  VALIDATE("Standard Cost","Unit Cost")
                                                                ELSE
                                                                  TestNoEntriesExist(FIELDCAPTION("Unit Cost"));
                                                              END;

                                                   CaptionML=[ENU=Unit Cost;
                                                              ESP=Coste unitario];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 24  ;   ;Standard Cost       ;Decimal       ;OnValidate=BEGIN
                                                                Item.GET("Item No.");
                                                                IF (Item."Costing Method" = Item."Costing Method"::Standard) AND (CurrFieldNo <> 0) THEN
                                                                  IF NOT
                                                                     CONFIRM(
                                                                       Text001 +
                                                                       Text002 +
                                                                       Text003,FALSE,
                                                                       FIELDCAPTION("Standard Cost"))
                                                                  THEN BEGIN
                                                                    "Standard Cost" := xRec."Standard Cost";
                                                                    EXIT;
                                                                  END;

                                                                ItemCostMgt.UpdateUnitCostSKU(Item,Rec,0,0,TRUE,FIELDNO("Standard Cost"));
                                                              END;

                                                   CaptionML=[ENU=Standard Cost;
                                                              ESP=Coste est ndar];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 25  ;   ;Last Direct Cost    ;Decimal       ;CaptionML=[ENU=Last Direct Cost;
                                                              ESP=éltimo coste directo];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 31  ;   ;Vendor No.          ;Code20        ;TableRelation=Vendor;
                                                   OnValidate=BEGIN
                                                                IF (xRec."Vendor No." <> "Vendor No.") AND
                                                                  ("Vendor No." <> '')
                                                                THEN
                                                                  IF Vend.GET("Vendor No.") THEN
                                                                    "Lead Time Calculation" := Vend."Lead Time Calculation";
                                                              END;

                                                   CaptionML=[ENU=Vendor No.;
                                                              ESP=N§ proveedor] }
    { 32  ;   ;Vendor Item No.     ;Text20        ;CaptionML=[ENU=Vendor Item No.;
                                                              ESP=C¢d. producto proveedor] }
    { 33  ;   ;Lead Time Calculation;DateFormula  ;CaptionML=[ENU=Lead Time Calculation;
                                                              ESP=Plazo entrega (d¡as)] }
    { 34  ;   ;Reorder Point       ;Decimal       ;CaptionML=[ENU=Reorder Point;
                                                              ESP=Punto pedido];
                                                   DecimalPlaces=0:5 }
    { 35  ;   ;Maximum Inventory   ;Decimal       ;CaptionML=[ENU=Maximum Inventory;
                                                              ESP=Stock m ximo];
                                                   DecimalPlaces=0:5 }
    { 36  ;   ;Reorder Quantity    ;Decimal       ;CaptionML=[ENU=Reorder Quantity;
                                                              ESP=Cantidad a pedir];
                                                   DecimalPlaces=0:5 }
    { 53  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Stockkeeping Unit Comment Line" WHERE (Item No.=FIELD(Item No.),
                                                                                                             Variant Code=FIELD(Variant Code),
                                                                                                             Location Code=FIELD(Location Code)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 62  ;   ;Last Date Modified  ;Date          ;CaptionML=[ENU=Last Date Modified;
                                                              ESP=Fecha £lt. modificaci¢n];
                                                   Editable=No }
    { 64  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Date Filter;
                                                              ESP=Filtro fecha] }
    { 65  ;   ;Global Dimension 1 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Global Dimension 1 Filter;
                                                              ESP=Filtro dimensi¢n global 1] }
    { 66  ;   ;Global Dimension 2 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Global Dimension 2 Filter;
                                                              ESP=Filtro dimensi¢n global  2] }
    { 68  ;   ;Inventory           ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry".Quantity WHERE (Item No.=FIELD(Item No.),
                                                                                                       Location Code=FIELD(Location Code),
                                                                                                       Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                       Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                       Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                       Variant Code=FIELD(Variant Code)));
                                                   CaptionML=[ENU=Inventory;
                                                              ESP=Existencias];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 84  ;   ;Qty. on Purch. Order;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Purchase Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                    Type=CONST(Item),
                                                                                                                    No.=FIELD(Item No.),
                                                                                                                    Location Code=FIELD(Location Code),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                    Variant Code=FIELD(Variant Code),
                                                                                                                    Expected Receipt Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Purch. Order;
                                                              ESP=Cdad. en pedidos compra];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 85  ;   ;Qty. on Sales Order ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                 Type=CONST(Item),
                                                                                                                 No.=FIELD(Item No.),
                                                                                                                 Location Code=FIELD(Location Code),
                                                                                                                 Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                 Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                 Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                 Variant Code=FIELD(Variant Code),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Sales Order;
                                                              ESP=Cdad. en pedidos venta];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 89  ;   ;Drop Shipment Filter;Boolean       ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Drop Shipment Filter;
                                                              ESP=Filtro env¡o directo] }
    { 5400;   ;Transfer-Level Code ;Integer       ;CaptionML=[ENU=Transfer-Level Code;
                                                              ESP=C¢d. nivel transfer.];
                                                   Editable=No }
    { 5401;   ;Lot Size            ;Decimal       ;CaptionML=[ENU=Lot Size;
                                                              ESP=Tama¤o lote];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5410;   ;Discrete Order Quantity;Integer    ;CaptionML=[ENU=Discrete Order Quantity;
                                                              ESP=Cantidad pedido discreta];
                                                   MinValue=0 }
    { 5411;   ;Minimum Order Quantity;Decimal     ;CaptionML=[ENU=Minimum Order Quantity;
                                                              ESP=Cantidad m¡nima pedido];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5412;   ;Maximum Order Quantity;Decimal     ;CaptionML=[ENU=Maximum Order Quantity;
                                                              ESP=Cantidad m xima pedido];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5413;   ;Safety Stock Quantity;Decimal      ;CaptionML=[ENU=Safety Stock Quantity;
                                                              ESP=Stock de seguridad];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5414;   ;Order Multiple      ;Decimal       ;CaptionML=[ENU=Order Multiple;
                                                              ESP=M£ltiplos de pedido];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5415;   ;Safety Lead Time    ;DateFormula   ;CaptionML=[ENU=Safety Lead Time;
                                                              ESP=Plazo de seguridad] }
    { 5416;   ;Components at Location;Code10      ;TableRelation=Location;
                                                   CaptionML=[ENU=Components at Location;
                                                              ESP=Componentes en alm.] }
    { 5417;   ;Flushing Method     ;Option        ;CaptionML=[ENU=Flushing Method;
                                                              ESP=M‚todo de baja];
                                                   OptionCaptionML=[ENU=Manual,Forward,Backward,Pick + Forward,Pick + Backward;
                                                                    ESP=Manual,Adelante,Atr s,Pick + Adelante,Pick + Atr s];
                                                   OptionString=Manual,Forward,Backward,Pick + Forward,Pick + Backward }
    { 5419;   ;Replenishment System;Option        ;OnValidate=BEGIN
                                                                IF ("Replenishment System" = "Replenishment System"::Transfer) AND
                                                                  ("Location Code" = '')
                                                                THEN
                                                                  ERROR(
                                                                    Text004,
                                                                    FIELDCAPTION("Location Code"),TABLECAPTION,
                                                                    "Replenishment System",FIELDCAPTION("Replenishment System"));
                                                                IF "Replenishment System" IN ["Replenishment System"::Purchase,"Replenishment System"::"Prod. Order"]
                                                                THEN BEGIN
                                                                  "Transfer-Level Code" := 0;
                                                                  FromLocation := "Transfer-from Code";
                                                                  IF NOT UpdateTransferLevels(Rec) THEN
                                                                    ShowLoopError;
                                                                  END
                                                                ELSE
                                                                  IF "Replenishment System" = "Replenishment System"::Transfer THEN
                                                                    VALIDATE("Transfer-from Code");
                                                              END;

                                                   CaptionML=[ENU=Replenishment System;
                                                              ESP=Sistema reposici¢n];
                                                   OptionCaptionML=[ENU=Purchase,Prod. Order,Transfer;
                                                                    ESP=Compra,Orden prod.,Transferencia];
                                                   OptionString=Purchase,Prod. Order,Transfer }
    { 5420;   ;Scheduled Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                     Item No.=FIELD(Item No.),
                                                                                                                     Location Code=FIELD(Location Code),
                                                                                                                     Variant Code=FIELD(Variant Code),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Ending Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Scheduled Receipt (Qty.);
                                                              ESP=Recepci¢n programada (cdad.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5421;   ;Scheduled Need (Qty.);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Component"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                          Item No.=FIELD(Item No.),
                                                                                                                          Location Code=FIELD(Location Code),
                                                                                                                          Variant Code=FIELD(Variant Code),
                                                                                                                          Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                          Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                          Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Scheduled Need (Qty.);
                                                              ESP=Necesidad programada (cdad.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5423;   ;Bin Filter          ;Code20        ;FieldClass=FlowFilter;
                                                   TableRelation=Bin.Code WHERE (Location Code=FIELD(Location Code));
                                                   CaptionML=[ENU=Bin Filter;
                                                              ESP=Filtro ubicaci¢n] }
    { 5428;   ;Reorder Cycle       ;DateFormula   ;CaptionML=[ENU=Reorder Cycle;
                                                              ESP=Ciclo reaprovisionamiento] }
    { 5440;   ;Reordering Policy   ;Option        ;OnValidate=BEGIN
                                                                IF "Reordering Policy" <> "Reordering Policy"::"Lot-for-Lot" THEN
                                                                  "Include Inventory" :=
                                                                    ("Reordering Policy" <> "Reordering Policy"::" ") AND
                                                                    ("Reordering Policy" <> "Reordering Policy"::Order);
                                                              END;

                                                   CaptionML=[ENU=Reordering Policy;
                                                              ESP=Pol¡tica reaprov.];
                                                   OptionCaptionML=[ENU=" ,Fixed Reorder Qty.,Maximum Qty.,Order,Lot-for-Lot";
                                                                    ESP=" ,Cdad. fija reaprov.,Cdad. m xima,Pedido,Lote a lote"];
                                                   OptionString=[ ,Fixed Reorder Qty.,Maximum Qty.,Order,Lot-for-Lot] }
    { 5441;   ;Include Inventory   ;Boolean       ;CaptionML=[ENU=Include Inventory;
                                                              ESP=Incluir existencias] }
    { 5442;   ;Manufacturing Policy;Option        ;CaptionML=[ENU=Manufacturing Policy;
                                                              ESP=Pol¡tica fabricaci¢n];
                                                   OptionCaptionML=[ENU=Make-to-Stock,Make-to-Order;
                                                                    ESP=Fab-contra-stock,Fab-contra-pedido];
                                                   OptionString=Make-to-Stock,Make-to-Order }
    { 5700;   ;Transfer-from Code  ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   OnValidate=VAR
                                                                FromSKU@1000 : Record 5700;
                                                              BEGIN
                                                                FromSKU.SETRANGE("Location Code","Transfer-from Code");
                                                                FromSKU.SETRANGE("Item No.","Item No.");
                                                                FromSKU.SETRANGE("Variant Code","Variant Code");
                                                                IF NOT FromSKU.FIND('-') THEN
                                                                  "Transfer-Level Code" := -1
                                                                ELSE
                                                                  "Transfer-Level Code" := FromSKU."Transfer-Level Code" - 1;
                                                                FromLocation := "Transfer-from Code";
                                                                MODIFY(TRUE);
                                                                IF NOT UpdateTransferLevels(Rec) THEN
                                                                  ShowLoopError;

                                                                IF ("Transfer-from Code" <> '') THEN
                                                                  IF NOT TransferRouteExists("Transfer-from Code","Location Code") THEN
                                                                    ERROR(
                                                                      Text005,
                                                                      TransferRoute.TABLECAPTION,
                                                                      FIELDCAPTION("Location Code"),
                                                                      "Transfer-from Code",
                                                                      "Location Code");
                                                              END;

                                                   CaptionML=[ENU=Transfer-from Code;
                                                              ESP=Transfer. desde-c¢d.] }
    { 5701;   ;Qty. in Transit     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Qty. in Transit (Base)" WHERE (Derived From Line No.=CONST(0),
                                                                                                                   Item No.=FIELD(Item No.),
                                                                                                                   Transfer-to Code=FIELD(Location Code),
                                                                                                                   Variant Code=FIELD(Variant Code),
                                                                                                                   Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                   Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                   Receipt Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. in Transit;
                                                              ESP=Cdad. en tr nsito];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5702;   ;Trans. Ord. Receipt (Qty.);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Outstanding Qty. (Base)" WHERE (Derived From Line No.=CONST(0),
                                                                                                                    Item No.=FIELD(Item No.),
                                                                                                                    Transfer-to Code=FIELD(Location Code),
                                                                                                                    Variant Code=FIELD(Variant Code),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Receipt Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Trans. Ord. Receipt (Qty.);
                                                              ESP=Recep. ped. transfer. (cdad.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5703;   ;Trans. Ord. Shipment (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Outstanding Qty. (Base)" WHERE (Derived From Line No.=CONST(0),
                                                                                                                    Item No.=FIELD(Item No.),
                                                                                                                    Transfer-from Code=FIELD(Location Code),
                                                                                                                    Variant Code=FIELD(Variant Code),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Shipment Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Trans. Ord. Shipment (Qty.);
                                                              ESP=Env¡o ped. transfer. (cdad.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5901;   ;Qty. on Service Order;Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Service Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                   Type=CONST(Item),
                                                                                                                   No.=FIELD(Item No.),
                                                                                                                   Location Code=FIELD(Location Code),
                                                                                                                   Variant Code=FIELD(Variant Code),
                                                                                                                   Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                   Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                   Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Service Order;
                                                              ESP=Cdad. en ped. servicio];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 7301;   ;Special Equipment Code;Code10      ;TableRelation="Special Equipment";
                                                   CaptionML=[ENU=Special Equipment Code;
                                                              ESP=C¢d. equipo especial] }
    { 7302;   ;Put-away Template Code;Code10      ;TableRelation="Put-away Template Header";
                                                   CaptionML=[ENU=Put-away Template Code;
                                                              ESP=C¢d. plantilla ubicar] }
    { 7307;   ;Put-away Unit of Measure Code;Code10;
                                                   TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(Item No.));
                                                   CaptionML=[ENU=Put-away Unit of Measure Code;
                                                              ESP=C¢d. ud. medida ubicaci¢n] }
    { 7380;   ;Phys Invt Counting Period Code;Code10;
                                                   TableRelation="Phys. Invt. Counting Period";
                                                   OnValidate=VAR
                                                                PhysInvtCountPeriod@1000 : Record 7381;
                                                                PhysInvtCountPeriodMgt@1001 : Codeunit 7380;
                                                              BEGIN
                                                                IF "Phys Invt Counting Period Code" <> '' THEN BEGIN
                                                                  PhysInvtCountPeriod.GET("Phys Invt Counting Period Code");
                                                                  PhysInvtCountPeriod.TESTFIELD("Count Frequency per Year");
                                                                  IF "Phys Invt Counting Period Code" <> xRec."Phys Invt Counting Period Code" THEN BEGIN
                                                                    IF CurrFieldNo <> 0 THEN
                                                                      IF NOT CONFIRM(
                                                                        Text7380,
                                                                        FALSE,
                                                                        FIELDCAPTION("Phys Invt Counting Period Code"),
                                                                        FIELDCAPTION("Next Counting Period"))
                                                                      THEN
                                                                        ERROR(Text7381);

                                                                    "Next Counting Period" :=
                                                                      PhysInvtCountPeriodMgt.CalcPeriod(
                                                                        "Last Counting Period Update",'',PhysInvtCountPeriod."Count Frequency per Year",
                                                                        ("Last Counting Period Update" = 0D) OR
                                                                        ("Phys Invt Counting Period Code" <> xRec."Phys Invt Counting Period Code"));
                                                                  END;
                                                                END ELSE BEGIN
                                                                  IF NOT CONFIRM(Text003,FALSE,FIELDCAPTION("Phys Invt Counting Period Code")) THEN
                                                                    ERROR(Text7381);
                                                                  "Next Counting Period" := '';
                                                                  "Last Counting Period Update" := 0D;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Phys Invt Counting Period Code;
                                                              ESP=C¢d. perio. recuento inv. f¡s.] }
    { 7381;   ;Last Counting Period Update;Date   ;CaptionML=[ENU=Last Counting Period Update;
                                                              ESP=élt. actual. periodo recuento];
                                                   Editable=No }
    { 7382;   ;Next Counting Period;Text250       ;CaptionML=[ENU=Next Counting Period;
                                                              ESP=Siguiente periodo recuento];
                                                   Editable=No }
    { 7383;   ;Last Phys. Invt. Date;Date         ;FieldClass=FlowField;
                                                   CalcFormula=Max("Phys. Inventory Ledger Entry"."Posting Date" WHERE (Item No.=FIELD(Item No.),
                                                                                                                        Location Code=FIELD(Location Code),
                                                                                                                        Variant Code=FIELD(Variant Code),
                                                                                                                        Phys Invt Counting Period Type=FILTER(' '|SKU)));
                                                   CaptionML=[ENU=Last Phys. Invt. Date;
                                                              ESP=élt. fecha invent. f¡sico];
                                                   Editable=No }
    { 7384;   ;Use Cross-Docking   ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Use Cross-Docking;
                                                              ESP=Utilizar tr nsito directo] }
    { 99000765;;Planned Order Receipt (Qty.);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Planned),
                                                                                                                     Item No.=FIELD(Item No.),
                                                                                                                     Variant Code=FIELD(Variant Code),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Code),
                                                                                                                     Ending Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Planned Order Receipt (Qty.);
                                                              ESP=Recep. (cdad) O.P. planif.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000766;;FP Order Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Firm Planned),
                                                                                                                     Item No.=FIELD(Item No.),
                                                                                                                     Variant Code=FIELD(Variant Code),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Code),
                                                                                                                     Ending Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=FP Order Receipt (Qty.);
                                                              ESP=Recep. (cdad.) O.P. p.f.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000767;;Rel. Order Receipt (Qty.);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Released),
                                                                                                                     Item No.=FIELD(Item No.),
                                                                                                                     Variant Code=FIELD(Variant Code),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Code),
                                                                                                                     Ending Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Rel. Order Receipt (Qty.);
                                                              ESP=Recep. (cdad.) O.P. lanz.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000769;;Planned Order Release (Qty.);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Planned),
                                                                                                                     Item No.=FIELD(Item No.),
                                                                                                                     Variant Code=FIELD(Variant Code),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Code),
                                                                                                                     Starting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Planned Order Release (Qty.);
                                                              ESP=Lanz. (cdad.) O.P. planif.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000770;;Purch. Req. Receipt (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               No.=FIELD(Item No.),
                                                                                                               Location Code=FIELD(Location Code),
                                                                                                               Variant Code=FIELD(Variant Code),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                               Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Purch. Req. Receipt (Qty.);
                                                              ESP=Hoja demanda recib. (cdad.)];
                                                   DecimalPlaces=0:5 }
    { 99000771;;Purch. Req. Release (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               No.=FIELD(Item No.),
                                                                                                               Location Code=FIELD(Location Code),
                                                                                                               Variant Code=FIELD(Variant Code),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                               Order Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Purch. Req. Release (Qty.);
                                                              ESP=Hoja demanda lanzada (cdad.)];
                                                   DecimalPlaces=0:5 }
    { 99000777;;Qty. on Prod. Order;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                     Item No.=FIELD(Item No.),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Code),
                                                                                                                     Variant Code=FIELD(Variant Code),
                                                                                                                     Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Prod. Order;
                                                              ESP=Cdad. en orden producc.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000778;;Qty. on Component Lines;Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Component"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                          Item No.=FIELD(Item No.),
                                                                                                                          Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                          Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                          Location Code=FIELD(Location Code),
                                                                                                                          Variant Code=FIELD(Variant Code),
                                                                                                                          Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Component Lines;
                                                              ESP=Cdad. l¡nea componentes];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
  }
  KEYS
  {
    {    ;Location Code,Item No.,Variant Code     ;Clustered=Yes }
    {    ;Replenishment System,Vendor No.,Transfer-from Code }
    {    ;Item No.,Location Code,Variant Code      }
    {    ;Item No.,Transfer-Level Code             }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You must specify a %1 or a %2 for each %3.;ESP=Debe especificar un %1 o un %2 para cada %3.';
      Text001@1001 : TextConst 'ENU="There may be orders and open ledger entries for the item. ";ESP="El producto tiene pedidos o movimientos pendientes. "';
      Text002@1002 : TextConst 'ENU=If you change %1 it may affect new orders and entries.\\;ESP=Si cambia el %1 puede afectar a los pedidos y movimientos nuevos.\\';
      Text003@1003 : TextConst 'ENU=Do you want to change %1?;ESP=¨Confirma que desea cambiar %1?';
      Text004@1004 : TextConst 'ENU=You must specify a %1 for this %2 to use %3 as %4.;ESP=Debe especif. un %1 para este %2 para usar %3 como %4.';
      Text005@1005 : TextConst 'ENU=You must specify a %1 from %2 %3 to %2 %4.;ESP=Debe especificar un %1 desde %2 %3 a %2 %4.';
      Text006@1006 : TextConst 'ENU=A circular reference in %1 has been detected:\;ESP=Una referencia circular en %1 ha sido detectada:\';
      TransferRoute@1007 : Record 5742;
      Item@1008 : Record 27;
      PlanningAssignment@1009 : Record 99000850;
      ItemCostMgt@1012 : Codeunit 5804;
      FromLocation@1010 : Code[10];
      ErrorString@1011 : Text[80];
      Text008@1013 : TextConst 'ENU=You cannot change %1 because there are one or more ledger entries for this SKU.;ESP=No puede cambiar %1 porque hay uno o m s movs. para esta ud. de almacenam.';
      Text7380@1015 : TextConst 'ENU=If you change the %1, the %2 is calculated.\Do you still want to change the %1?;ESP=Si cambia el %1, se calcula el %2.\¨Desea cambiar el %1?';
      Text7381@1014 : TextConst 'ENU=Cancelled.;ESP=Cancelado.';
      Vend@1016 : Record 23;

    LOCAL PROCEDURE TransferRouteExists@1(TransferFromCode@1000 : Code[10];TransferToCode@1001 : Code[10]) : Boolean;
    BEGIN
      TransferRoute.SETRANGE("Transfer-from Code",TransferFromCode);
      TransferRoute.SETRANGE("Transfer-to Code",TransferToCode);
      EXIT(TransferRoute.FIND('-'));
    END;

    PROCEDURE UpdateTransferLevels@2(FromSKU@1000 : Record 5700) : Boolean;
    VAR
      ToSKU@1001 : Record 5700;
    BEGIN
      ToSKU.SETCURRENTKEY("Replenishment System","Vendor No.","Transfer-from Code");
      ToSKU.SETRANGE("Replenishment System","Replenishment System"::Transfer);
      ToSKU.SETRANGE("Transfer-from Code",FromSKU."Location Code");
      ToSKU.SETRANGE("Item No.",FromSKU."Item No.");
      ToSKU.SETRANGE("Variant Code",FromSKU."Variant Code");
      IF ToSKU.FIND('-') THEN
        REPEAT
          IF ToSKU."Location Code" = FromLocation THEN BEGIN
            ErrorString := ToSKU."Location Code";
            EXIT(FALSE);
          END;
          ToSKU."Transfer-Level Code" := FromSKU."Transfer-Level Code" - 1;
          ToSKU.MODIFY;
          IF NOT UpdateTransferLevels(ToSKU) THEN BEGIN
            IF (STRLEN(ErrorString) + STRLEN(ToSKU."Location Code")) >
               (MAXSTRLEN(ErrorString) - 9)
            THEN BEGIN
              ErrorString := ErrorString + ' ->...';
              ShowLoopError;
            END;
            ErrorString := ErrorString + ' ->' + ToSKU."Location Code";
            EXIT(FALSE);
          END;
        UNTIL ToSKU.NEXT = 0;
      EXIT(TRUE);
    END;

    PROCEDURE ShowLoopError@3();
    BEGIN
      ERROR(
        Text006+
        '%2 ->%3 ->%4',
        FIELDCAPTION("Transfer-from Code"),
        ErrorString,
        "Location Code",
        "Transfer-from Code");
    END;

    LOCAL PROCEDURE TestNoEntriesExist@4(CurrentFieldName@1000 : Text[100]);
    VAR
      ItemLedgEntry@1001 : Record 32;
    BEGIN
      ItemLedgEntry.SETCURRENTKEY("Item No.","Entry Type","Variant Code","Drop Shipment","Location Code");
      ItemLedgEntry.SETRANGE("Item No.","Item No.");
      ItemLedgEntry.SETRANGE("Variant Code","Variant Code");
      ItemLedgEntry.SETRANGE("Location Code","Location Code");
      IF ItemLedgEntry.FIND('-') THEN
        ERROR(
          Text008,
          CurrentFieldName);
    END;

    PROCEDURE UpdateTempSKUTransferLevels@5(FromSKU@1000 : Record 5700;VAR ToSKU@1001 : TEMPORARY Record 5700;FromLocationCode@1002 : Code[10]) : Boolean;
    BEGIN
      // Used by the planning engine to update the transfer level codes on a temporary SKU record set
      // generated based on actual transfer orders.

      ToSKU.RESET;
      ToSKU.SETCURRENTKEY("Item No.","Location Code","Variant Code");
      ToSKU.SETRANGE("Transfer-from Code",FromSKU."Location Code");
      ToSKU.SETRANGE("Item No.",FromSKU."Item No.");
      ToSKU.SETRANGE("Variant Code",FromSKU."Variant Code");
      IF ToSKU.FIND('-') THEN
        REPEAT
          IF ToSKU."Location Code" = FromLocationCode THEN BEGIN
            ErrorString := ToSKU."Location Code";
            EXIT(FALSE);
          END;
          ToSKU."Transfer-Level Code" := FromSKU."Transfer-Level Code" - 1;
          ToSKU.MODIFY;
          IF NOT ToSKU.UpdateTempSKUTransferLevels(ToSKU,ToSKU,FromLocationCode) THEN BEGIN
            IF (STRLEN(ErrorString) + STRLEN(ToSKU."Location Code")) >
               (MAXSTRLEN(ErrorString) - 9)
            THEN BEGIN
              ErrorString := ErrorString + ' ->...';
              ERROR(
                Text006+
                '%2 ->%3 ->%4',
                FIELDCAPTION("Transfer-from Code"),
                ErrorString,
                "Location Code",
                "Transfer-from Code");
            END;
            ErrorString := ErrorString + ' ->' + ToSKU."Location Code";
            EXIT(FALSE);
          END;
        UNTIL ToSKU.NEXT = 0;
      EXIT(TRUE);
    END;

    BEGIN
    END.
  }
}
