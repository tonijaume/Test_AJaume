OBJECT Table 7009732 Precios contrato venta
{
  OBJECT-PROPERTIES
  {
    Date=01/07/14;
    Time=17:12:51;
    Modified=Yes;
    Version List=AIC2009;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               rParAge.FINDFIRST;
               IF NOT rParAge."Empresa Delegacion" THEN
                 ERROR(Text001 + Text002);

               IF "Orden Precio" = 0 THEN
               BEGIN
                 rPreVen.RESET;
                 rPreVen.SETCURRENTKEY(Delegacion, "N§ Contrato", "Orden Precio");
                 rPreVen.SETRANGE(rPreVen.Delegacion     , Delegacion);
                 rPreVen.SETRANGE(rPreVen."N§ Contrato"  , "N§ Contrato");
                 //rPreVen.SETRANGE(rPreVen."Codigo Precio", "Codigo Precio");
                 IF NOT rPreVen.FINDLAST THEN
                   "Orden Precio" := 10
                 ELSE
                   "Orden Precio" := rPreVen."Orden Precio" + 10;
               END;

               //-$003CASE "Codigo Precio" OF
               //-$003  "Codigo Precio"::Ofertas:
               //-$003  BEGIN
               //-$003    "Tipo Oferta" := "Tipo Oferta"::Precio;
               //-$003  END;
               //-$003  "Codigo Precio"::AxB:
               //-$003  BEGIN
               //-$003    "Tipo Oferta" := "Tipo Oferta"::AxB;
               //-$003  END;
               //-$003END;

               VALIDATE(Replicado);
             END;

    OnModify=BEGIN
               rParAge.FINDFIRST;
               IF NOT rParAge."Empresa Delegacion" THEN
                 ERROR(Text003 + Text002);

               Activo := FALSE;

               IF rConV.GET(Delegacion, "N§ Contrato") THEN
               BEGIN
                 rConV.Enviar := TRUE;
                 rConV.MODIFY;
               END;

               activar_precio;

               VALIDATE(Replicado);
             END;

    OnDelete=VAR
               lrActED@1103355000 : Record 7010001;
             BEGIN
               rParAge.FINDFIRST;
               IF NOT rParAge."Empresa Delegacion" THEN
                 ERROR(Text004 + Text002);

               cFunSeg.TienePermiso(Text006, TRUE);

               IF rConV.GET(Delegacion, "N§ Contrato") THEN
               BEGIN
                 rConV.Enviar := TRUE;
                 rConV.MODIFY;
               END;

               cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                            "Orden Precio", Text008, Text009, '');

               // JPT-07/08/03 PARA GOC
               InsertaLinAction;

               {
               lrActED."No Tabla"  := 50032;
               lrActED.ID          := STRSUBSTNO('%1,%2,%3,%4',Delegacion,"N§ Contrato",
                                                 FORMAT("Codigo Precio",0,Text010),"Orden Precio");
               lrActED.INSERT(TRUE);
               }
             END;

    OnRename=BEGIN
               rParAge.FINDFIRST;
               IF NOT rParAge."Empresa Delegacion" THEN
                 ERROR(Text011 + Text002);

               VALIDATE(Replicado);
             END;

    CaptionML=[ENU=Sale contract prices;
               ESP=Precios contrato venta];
  }
  FIELDS
  {
    { 1   ;   ;Delegacion          ;Code10        ;CaptionML=[ENU=Local Office;
                                                              ESP=Delegacion];
                                                   Description=PK, FK Delegacion;
                                                   Editable=No }
    { 3   ;   ;N§ Contrato         ;Code10        ;CaptionML=[ENU=Contract No.;
                                                              ESP=N§ Contrato];
                                                   Description=PK, FK Contrato Venta;
                                                   Editable=No }
    { 5   ;   ;Codigo Precio       ;Option        ;CaptionML=[ENU=Price code;
                                                              ESP=Codigo Precio];
                                                   OptionCaptionML=[ENU=Room,Board,Surchage,Extras,Offers,AxB;
                                                                    ESP=Habitacion,Regimen,Suplementos,Extras,Ofertas,AxB];
                                                   OptionString=Habitacion,Regimen,Suplementos,Extras,Ofertas,AxB;
                                                   Description=PK;
                                                   Editable=No }
    { 7   ;   ;Orden Precio        ;Integer       ;CaptionML=[ENU=Price order;
                                                              ESP=Orden Precio];
                                                   Description=PK }
    { 9   ;   ;Codigo              ;Code10        ;OnValidate=VAR
                                                                lrOfert@1103355000 : Record 7009996;
                                                              BEGIN
                                                                IF Codigo <> xRec.Codigo THEN
                                                                BEGIN
                                                                  CASE "Codigo Precio" OF
                                                                    "Codigo Precio"::Regimen:
                                                                    BEGIN
                                                                      IF NOT rReg.GET(Codigo) THEN
                                                                        ERROR(Text012, Codigo);
                                                                    END;

                                                                    "Codigo Precio"::Habitacion:
                                                                    BEGIN
                                                                      rConHab.RESET;
                                                                      rConHab.SETRANGE(Delegacion       , Delegacion);
                                                                      rConHab.SETRANGE("N§ Contrato"    , "N§ Contrato");
                                                                      rConHab.SETRANGE("Tipo contrato"  , rConHab."Tipo contrato"::Venta);
                                                                      rConHab.SETRANGE("Habitacion cupo", Codigo);
                                                                      IF NOT rConHab.FINDFIRST THEN
                                                                        ERROR(Text013, Codigo);
                                                                    END;

                                                                    "Codigo Precio"::Suplementos:
                                                                    BEGIN
                                                                      rTipoEle.RESET;
                                                                      rTipoEle.SETRANGE(Humano, TRUE);
                                                                      rTipoEle.SETRANGE("Tipo elemento", Codigo);
                                                                      IF NOT rTipoEle.FINDFIRST THEN
                                                                        ERROR(Text014);
                                                                      rTipoEle.RESET;
                                                                    END;

                                                                    "Codigo Precio"::Extras:
                                                                    BEGIN
                                                                      IF NOT rCodExt.GET(Codigo) THEN
                                                                        ERROR(Text015, Codigo);
                                                                    END;

                                                                    "Codigo Precio"::Ofertas:
                                                                    BEGIN
                                                                      CLEAR(lrOfert);
                                                                      lrOfert.GET(Codigo);
                                                                      lrOfert.CopiaDatosVenta(Rec); //+$005
                                                                    END;
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION(Codigo), Codigo, xRec.Codigo);
                                                                END;
                                                              END;

                                                   OnLookup=VAR
                                                              lrOfert@1103355000 : Record 7009996;
                                                            BEGIN
                                                              CASE "Codigo Precio" OF
                                                                "Codigo Precio":: Regimen:
                                                                BEGIN
                                                                  IF FORM.RUNMODAL(0, rReg) = ACTION::LookupOK THEN
                                                                    Codigo := rReg.Regimen;
                                                                END;

                                                                "Codigo Precio"::Habitacion:
                                                                BEGIN
                                                                  rConHab.RESET;
                                                                  rConHab.SETRANGE(Delegacion     , Delegacion);
                                                                  rConHab.SETRANGE("N§ Contrato"  , "N§ Contrato");
                                                                  rConHab.SETRANGE("Tipo contrato", rConHab."Tipo contrato"::Venta);
                                                                  IF FORM.RUNMODAL(0, rConHab) = ACTION::LookupOK THEN BEGIN
                                                                    Codigo := rConHab."Habitacion cupo";
                                                                  END;
                                                                  rConHab.RESET;
                                                                END;

                                                                "Codigo Precio"::Extras:
                                                                BEGIN
                                                                  IF FORM.RUNMODAL(0, rCodExt) = ACTION::LookupOK THEN
                                                                    Codigo := rCodExt.Codigo;
                                                                END;

                                                                "Codigo Precio"::Suplementos:
                                                                BEGIN
                                                                  rTipoEle.RESET;
                                                                  rTipoEle.SETRANGE(Humano, TRUE);
                                                                  IF FORM.RUNMODAL(7009712, rTipoEle) = ACTION::LookupOK THEN
                                                                    Codigo := rTipoEle."Tipo elemento";
                                                                  rTipoEle.RESET;
                                                                END;

                                                                "Codigo Precio"::Ofertas:
                                                                BEGIN
                                                                  CLEAR(lrOfert);
                                                                  lrOfert.Codigo := Codigo;
                                                                  IF FORM.RUNMODAL(0, lrOfert) = ACTION::LookupOK THEN
                                                                    VALIDATE(Codigo, lrOfert.Codigo);
                                                                END;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Code;
                                                              ESP=Codigo];
                                                   NotBlank=Yes;
                                                   Description=Multi Relacion }
    { 11  ;   ;Fecha desde         ;Date          ;OnValidate=BEGIN
                                                                IF "Fecha desde" <> xRec."Fecha desde" THEN
                                                                BEGIN
                                                                  IF "Fecha hasta" <> 0D THEN
                                                                  BEGIN
                                                                    IF "Fecha desde" > "Fecha hasta" THEN
                                                                      ERROR(Text016);
                                                                  END;

                                                                  IF ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+entrada") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+estancia") THEN
                                                                  BEGIN
                                                                    IF rConV.GET(Delegacion, "N§ Contrato") THEN
                                                                    BEGIN
                                                                      IF ("Fecha desde" < rConV."Fecha inicio contrato") OR ("Fecha desde" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text017);
                                                                    END;
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Fecha desde"), STRSUBSTNO('%1', "Fecha desde"),
                                                                                               STRSUBSTNO('%1', xRec."Fecha desde"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Date From;
                                                              ESP=Fecha desde] }
    { 13  ;   ;Fecha hasta         ;Date          ;OnValidate=BEGIN
                                                                IF "Fecha hasta" <> xRec."Fecha hasta" THEN
                                                                BEGIN
                                                                  IF "Fecha desde" <> 0D THEN
                                                                  BEGIN
                                                                    IF "Fecha desde" > "Fecha hasta" THEN
                                                                      ERROR(Text016);
                                                                  END;

                                                                  IF ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+entrada") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+estancia") THEN
                                                                  BEGIN
                                                                    IF rConV.GET(Delegacion, "N§ Contrato") THEN
                                                                    BEGIN
                                                                      IF ("Fecha hasta" < rConV."Fecha inicio contrato") OR ("Fecha hasta" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text018);
                                                                    END;
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Fecha hasta"), STRSUBSTNO('%1', "Fecha hasta"),
                                                                                               STRSUBSTNO('%1', xRec."Fecha hasta"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Date To;
                                                              ESP=Fecha hasta] }
    { 15  ;   ;Importe             ;Decimal       ;OnValidate=BEGIN
                                                                IF Importe <> xRec.Importe THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION(Importe), STRSUBSTNO('%1', Importe),
                                                                                               STRSUBSTNO('%1', xRec.Importe));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="C¢d. divisa" }
    { 17  ;   ;Tipo Precio         ;Option        ;InitValue=Pax;
                                                   OnValidate=BEGIN
                                                                IF "Tipo Precio" <> xRec."Tipo Precio" THEN BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Tipo Precio"), STRSUBSTNO('%1', "Tipo Precio"),
                                                                                               STRSUBSTNO('%1', xRec."Tipo Precio"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Price type;
                                                              ESP=Tipo Precio];
                                                   OptionCaptionML=[ENU=,Pax,Room;
                                                                    ESP=,Pax,Habitaci¢n];
                                                   OptionString=,Pax,Habitaci¢n }
    { 19  ;   ;Garantizable        ;Boolean       ;InitValue=No;
                                                   OnValidate=BEGIN
                                                                IF Garantizable <> xRec.Garantizable THEN
                                                                BEGIN
                                                                  IF Garantizable THEN
                                                                    "Importe HP" := FALSE
                                                                  ELSE
                                                                    "Importe HP" := TRUE;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION(Garantizable), STRSUBSTNO('%1', Garantizable),
                                                                                               STRSUBSTNO('%1', xRec.Garantizable));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Warrantable;
                                                              ESP=Garantizable] }
    { 21  ;   ;Importe HP          ;Boolean       ;InitValue=Yes;
                                                   OnValidate=BEGIN
                                                                IF "Importe HP" <> xRec."Importe HP" THEN
                                                                BEGIN
                                                                  IF "Importe HP" THEN
                                                                    Garantizable := FALSE
                                                                  ELSE
                                                                    Garantizable := TRUE;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Importe HP"), STRSUBSTNO('%1', "Importe HP"),
                                                                                               STRSUBSTNO('%1', xRec."Importe HP"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=HP Amount;
                                                              ESP=Importe HP] }
    { 23  ;   ;N§ Persona          ;Integer       ;OnValidate=BEGIN
                                                                IF "N§ Persona" <> xRec."N§ Persona" THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("N§ Persona"), STRSUBSTNO('%1', "N§ Persona"),
                                                                                               STRSUBSTNO('%1', xRec."N§ Persona"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Person No.;
                                                              ESP=N§ Persona] }
    { 25  ;   ;Tipo Habitacion     ;Code10        ;OnValidate=VAR
                                                                rConHab@1103355000 : Record 7009731;
                                                              BEGIN
                                                                IF "Tipo Habitacion" <> xRec."Tipo Habitacion" THEN
                                                                BEGIN
                                                                  IF "Tipo Habitacion" <> '' THEN
                                                                  BEGIN
                                                                    rConHab.RESET;
                                                                    rConHab.SETRANGE(Delegacion       , Delegacion);
                                                                    rConHab.SETRANGE("N§ Contrato"    , "N§ Contrato");
                                                                    rConHab.SETRANGE("Tipo contrato"  , rConHab."Tipo contrato"::Venta);
                                                                    rConHab.SETRANGE("Habitacion cupo", "Tipo Habitacion");
                                                                    IF NOT rConHab.FINDFIRST THEN
                                                                      ERROR(Text019, "Tipo Habitacion");
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Tipo Habitacion"), "Tipo Habitacion",
                                                                                               xRec."Tipo Habitacion");
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              rConHab.RESET;
                                                              rConHab.SETRANGE(Delegacion     , Delegacion);
                                                              rConHab.SETRANGE("N§ Contrato"  , "N§ Contrato");
                                                              rConHab.SETRANGE("Tipo contrato", rConHab."Tipo contrato"::Venta);
                                                              IF FORM.RUNMODAL(7009741, rConHab) = ACTION::LookupOK THEN
                                                                VALIDATE("Tipo Habitacion", rConHab."Habitacion cupo");
                                                            END;

                                                   CaptionML=[ENU=Room type;
                                                              ESP=Tipo Habitacion] }
    { 27  ;   ;Tipo Regimen        ;Code10        ;TableRelation=Regimen.Regimen;
                                                   OnValidate=BEGIN
                                                                IF "Tipo Regimen" <> xRec."Tipo Regimen" THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Tipo Regimen"), "Tipo Regimen",
                                                                                               "Tipo Regimen");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Board type;
                                                              ESP=Tipo Regimen];
                                                   Description=FK Regimen }
    { 29  ;   ;Tipo Fechas         ;Option        ;InitValue=Fecha estancia;
                                                   OnValidate=BEGIN
                                                                IF "Tipo Fechas" <> xRec."Tipo Fechas" THEN
                                                                BEGIN
                                                                  IF ("Fecha desde" = 0D) OR ("Fecha hasta" = 0D) THEN
                                                                    EXIT;

                                                                  IF ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+entrada") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+estancia") AND
                                                                     ("Tipo Fechas" <> "Tipo Fechas"::"Fecha venta+salida") THEN
                                                                  BEGIN
                                                                    IF rConV.GET(Delegacion, "N§ Contrato") THEN
                                                                    BEGIN
                                                                      IF ("Fecha desde" < rConV."Fecha inicio contrato") OR
                                                                         ("Fecha desde" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text017);
                                                                      IF ("Fecha hasta" < rConV."Fecha inicio contrato") OR
                                                                         ("Fecha hasta" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text018);
                                                                    END;
                                                                  END;

                                                                  IF ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+entrada") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+estancia") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+salida") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha entrada+salida") THEN
                                                                  BEGIN
                                                                    IF ("2¦ Fecha desde" = 0D) OR ("2¦ Fecha hasta" = 0D) THEN
                                                                      EXIT;
                                                                    IF rConV.GET(Delegacion, "N§ Contrato") THEN
                                                                    BEGIN
                                                                      IF ("2¦ Fecha desde" < rConV."Fecha inicio contrato") OR
                                                                         ("2¦ Fecha desde" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text017);
                                                                      IF ("2¦ Fecha hasta" < rConV."Fecha inicio contrato") OR
                                                                         ("2¦ Fecha hasta" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text018);
                                                                    END;
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Tipo Fechas"), STRSUBSTNO('%1', "Tipo Fechas"),
                                                                                               STRSUBSTNO('%1', xRec."Tipo Fechas"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Dates type;
                                                              ESP=Tipo Fechas];
                                                   OptionCaptionML=[ENU="Sale date,Check-in date,Stay date,Sale+stay date,Sale+check-in date,Check-out date,Sale+check-out date,Check-out+check-in date ";
                                                                    ESP=Fecha venta,Fecha entrada,Fecha estancia,Fecha venta+estancia,Fecha venta+entrada,Fecha salida,Fecha venta+salida,Fecha entrada+salida];
                                                   OptionString=Fecha venta,Fecha entrada,Fecha estancia,Fecha venta+estancia,Fecha venta+entrada,Fecha salida,Fecha venta+salida,Fecha entrada+salida }
    { 31  ;   ;Tipo Persona        ;Code10        ;TableRelation="Tipo elemento"."Tipo elemento" WHERE (Humano=CONST(Yes));
                                                   OnValidate=BEGIN
                                                                IF "Tipo Persona" <> xRec."Tipo Persona" THEN
                                                                BEGIN
                                                                  rTipoEle.RESET;
                                                                  rTipoEle.SETRANGE(Humano         , TRUE);
                                                                  rTipoEle.SETRANGE("Tipo elemento", "Tipo Persona");
                                                                  IF NOT rTipoEle.FINDFIRST THEN
                                                                     ERROR(Text014);

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Tipo Persona"), "Tipo Persona",
                                                                                               xRec."Tipo Persona");
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              rTipoEle.RESET;
                                                              rTipoEle.SETRANGE(Humano, TRUE);
                                                              IF FORM.RUNMODAL(7009712, rTipoEle) = ACTION::LookupOK THEN
                                                                VALIDATE("Tipo Persona", rTipoEle."Tipo elemento");
                                                            END;

                                                   CaptionML=[ENU=Person type;
                                                              ESP=Tipo Persona];
                                                   Description=FK Tipo elemento }
    { 33  ;   ;Edad desde          ;Integer       ;OnValidate=BEGIN
                                                                IF "Edad desde" <> xRec."Edad desde" THEN BEGIN
                                                                  IF "Edad desde" < 0 THEN
                                                                    ERROR(Text020);
                                                                  IF "Edad desde" > 120 THEN
                                                                    ERROR(Text021);

                                                                  IF "Edad hasta" <> 0 THEN
                                                                  BEGIN
                                                                    IF "Edad hasta" < "Edad desde" THEN
                                                                      ERROR(Text022);
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Edad desde"), STRSUBSTNO('%1', "Edad desde"),
                                                                                               STRSUBSTNO('%1', xRec."Edad desde"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Age from;
                                                              ESP=Edad desde] }
    { 35  ;   ;Edad hasta          ;Integer       ;OnValidate=BEGIN
                                                                IF "Edad hasta" <> xRec."Edad hasta" THEN
                                                                BEGIN
                                                                  IF "Edad hasta" > 120 THEN
                                                                    ERROR(Text021);

                                                                  IF "Edad desde" <> 0 THEN
                                                                  BEGIN
                                                                    IF "Edad hasta" < "Edad desde" THEN
                                                                      ERROR(Text022);
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Edad hasta"), STRSUBSTNO('%1', "Edad hasta"),
                                                                                               STRSUBSTNO('%1', xRec."Edad hasta"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Age to;
                                                              ESP=Edad hasta] }
    { 37  ;   ;Tipo Persona acompa¤ante;Code10    ;TableRelation="Tipo elemento"."Tipo elemento" WHERE (Humano=CONST(Yes));
                                                   OnValidate=BEGIN
                                                                IF "Tipo Persona acompa¤ante" <> xRec."Tipo Persona acompa¤ante" THEN
                                                                BEGIN
                                                                  rTipoEle.RESET;
                                                                  rTipoEle.SETRANGE(Humano, TRUE);
                                                                  rTipoEle.SETRANGE("Tipo elemento", "Tipo Persona acompa¤ante");
                                                                  IF NOT rTipoEle.FINDFIRST THEN
                                                                     ERROR(Text014);

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Tipo Persona acompa¤ante"),
                                                                                               "Tipo Persona acompa¤ante", xRec."Tipo Persona acompa¤ante");
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              rTipoEle.RESET;
                                                              rTipoEle.SETRANGE(Humano, TRUE);
                                                              IF FORM.RUNMODAL(7009712, rTipoEle) = ACTION::LookupOK THEN
                                                                VALIDATE("Tipo Persona acompa¤ante", rTipoEle."Tipo elemento");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Companion person type;
                                                              ESP=Tipo Persona acompa¤ante];
                                                   Description=FK Tipo elemento }
    { 39  ;   ;N§ Personas acompa¤ante;Integer    ;OnValidate=BEGIN
                                                                IF "N§ Personas acompa¤ante" <> xRec."N§ Personas acompa¤ante" THEN BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("N§ Personas acompa¤ante"),
                                                                                               FORMAT("N§ Personas acompa¤ante"), FORMAT(xRec."N§ Personas acompa¤ante"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Companion people No.;
                                                              ESP=N§ Personas acompa¤ante] }
    { 41  ;   ;Porcentaje          ;Boolean       ;OnValidate=BEGIN
                                                                IF Porcentaje <> xRec.Porcentaje THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION(Porcentaje), STRSUBSTNO('%1', Porcentaje),
                                                                                               STRSUBSTNO('%1', xRec.Porcentaje));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Percentage;
                                                              ESP=Porcentaje] }
    { 43  ;   ;Acumular al total   ;Boolean       ;OnValidate=BEGIN
                                                                IF "Acumular al total" <> xRec."Acumular al total" THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Acumular al total"), STRSUBSTNO('%1', "Acumular al total"),
                                                                                               STRSUBSTNO('%1', xRec."Acumular al total"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Accumulate to total;
                                                              ESP=Acumular al total] }
    { 45  ;   ;Frecuencia          ;Integer       ;OnValidate=BEGIN
                                                                IF Frecuencia <> xRec.Frecuencia THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION(Frecuencia), STRSUBSTNO('%1', Frecuencia),
                                                                                               STRSUBSTNO('%1', xRec.Frecuencia));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Frequency;
                                                              ESP=Frecuencia] }
    { 47  ;   ;N§ Personas         ;Integer       ;OnValidate=BEGIN
                                                                IF "N§ Personas" <> xRec."N§ Personas" THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("N§ Personas"), STRSUBSTNO('%1', "N§ Personas"),
                                                                                               STRSUBSTNO('%1', xRec."N§ Personas"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=People No.;
                                                              ESP=N§ Personas] }
    { 49  ;   ;N§ Usos Oferta      ;Integer       ;CaptionML=[ENU=Offer usages No.;
                                                              ESP=N§ Usos Oferta] }
    { 51  ;   ;N§ Reservas aplicadas;Integer      ;CaptionML=[ENU=Applied reservations No.;
                                                              ESP=N§ Reservas aplicadas] }
    { 53  ;   ;Oferta excluyente   ;Boolean       ;OnValidate=BEGIN
                                                                IF "Oferta excluyente" <> xRec."Oferta excluyente" THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Oferta excluyente"), STRSUBSTNO('%1', "Oferta excluyente"),
                                                                                               STRSUBSTNO('%1', xRec."Oferta excluyente"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Exclusive offer;
                                                              ESP=Oferta excluyente] }
    { 55  ;   ;A partir de estancias;Integer      ;OnValidate=BEGIN
                                                                IF "A partir de estancias" <> xRec."A partir de estancias" THEN
                                                                BEGIN
                                                                  IF "N§ estancias" <> 0 THEN
                                                                    ERROR(Text023);

                                                                  VALIDATE("Hasta numero estancias");

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("A partir de estancias"),
                                                                                               FORMAT("A partir de estancias"), FORMAT(xRec."A partir de estancias"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=From stays;
                                                              ESP=A partir de estancias] }
    { 57  ;   ;N§ estancias        ;Integer       ;OnValidate=BEGIN
                                                                IF "N§ estancias" <> xRec."N§ estancias" THEN
                                                                BEGIN
                                                                  IF "N§ estancias" <> 0 THEN
                                                                    ERROR(Text023);

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("N§ estancias"), STRSUBSTNO('%1', "N§ estancias"),
                                                                                               STRSUBSTNO('%1', xRec."N§ estancias"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Stays No.;
                                                              ESP=N§ estancias] }
    { 59  ;   ;N§ estancias a facturar;Integer    ;CaptionML=[ENU=Stays no. To invoice;
                                                              ESP=N§ estancias a facturar] }
    { 61  ;   ;Tipo Oferta         ;Option        ;CaptionML=[ENU=Offer type;
                                                              ESP=Tipo Oferta];
                                                   OptionCaptionML=[ENU=Price,AxB;
                                                                    ESP=Precio,AxB];
                                                   OptionString=Precio,AxB;
                                                   Editable=No }
    { 63  ;   ;Activo              ;Boolean       ;InitValue=No;
                                                   CaptionML=[ENU=Active;
                                                              ESP=Activo];
                                                   Editable=No }
    { 65  ;   ;Aplica a Habitacion ;Boolean       ;OnValidate=BEGIN
                                                                IF "Aplica a Habitacion" <> xRec."Aplica a Habitacion" THEN
                                                                BEGIN
                                                                  IF "Subtipo Oferta" = "Subtipo Oferta"::"Free Night" THEN
                                                                    VALIDATE("Anula a Habitacion", "Aplica a Habitacion");

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Aplica a Habitacion"), STRSUBSTNO('%1', "Aplica a Habitacion"),
                                                                                               STRSUBSTNO('%1', xRec."Aplica a Habitacion"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Apply to room;
                                                              ESP=Aplica a Habitacion] }
    { 67  ;   ;Aplica a Regimen    ;Boolean       ;OnValidate=BEGIN
                                                                IF "Aplica a Regimen" <> xRec."Aplica a Regimen" THEN
                                                                BEGIN
                                                                  IF "Subtipo Oferta" = "Subtipo Oferta"::"Free Night" THEN
                                                                    VALIDATE("Anula a Regimen", "Aplica a Regimen");

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Aplica a Regimen"), STRSUBSTNO('%1', "Aplica a Regimen"),
                                                                                               STRSUBSTNO('%1', xRec."Aplica a Regimen"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Apply to board;
                                                              ESP=Aplica a Regimen] }
    { 69  ;   ;Aplica a Suplementos;Boolean       ;OnValidate=BEGIN
                                                                IF "Aplica a Suplementos" <> xRec."Aplica a Suplementos" THEN
                                                                BEGIN
                                                                  IF "Subtipo Oferta" = "Subtipo Oferta"::"Free Night" THEN
                                                                    VALIDATE("Anula a Suplementos", "Aplica a Suplementos");

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Aplica a Suplementos"), FORMAT("Aplica a Suplementos"),
                                                                                               FORMAT(xRec."Aplica a Suplementos"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Apply to Supplements;
                                                              ESP=Aplica a Suplementos] }
    { 71  ;   ;Aplica a Ofertas    ;Boolean       ;OnValidate=BEGIN
                                                                IF "Aplica a Ofertas" <> xRec."Aplica a Ofertas" THEN
                                                                BEGIN
                                                                  IF "Subtipo Oferta" = "Subtipo Oferta"::"Free Night" THEN
                                                                    VALIDATE("Anula a Ofertas", "Aplica a Ofertas");

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("Aplica a Ofertas"), STRSUBSTNO('%1', "Aplica a Ofertas"),
                                                                                               STRSUBSTNO('%1', xRec."Aplica a Ofertas"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Apply to offers;
                                                              ESP=Aplica a Ofertas] }
    { 73  ;   ;N§ Acompa¤antes exacto;Boolean     ;OnValidate=BEGIN
                                                                IF "N§ Acompa¤antes exacto" <> xRec."N§ Acompa¤antes exacto" THEN
                                                                BEGIN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("N§ Acompa¤antes exacto"), STRSUBSTNO('%1', "N§ Acompa¤antes exacto"),
                                                                                               STRSUBSTNO('%1', xRec."N§ Acompa¤antes exacto"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Companions No. Exactly;
                                                              ESP=N§ Acompa¤antes exacto] }
    { 75  ;   ;Anula a Habitacion  ;Boolean       ;CaptionML=[ENU=Cancel to Room;
                                                              ESP=Anula a Habitacion] }
    { 77  ;   ;Anula a Regimen     ;Boolean       ;CaptionML=[ENU=Cancel to Board;
                                                              ESP=Anula a Regimen] }
    { 79  ;   ;Anula a Suplementos ;Boolean       ;CaptionML=[ENU=Cancel Supplements;
                                                              ESP=Anula a Suplementos] }
    { 81  ;   ;Anula a Ofertas     ;Boolean       ;CaptionML=[ENU=Cancel to Offers;
                                                              ESP=Anula a Ofertas] }
    { 83  ;   ;Aplicacion fija     ;Boolean       ;CaptionML=[ENU=Fixed application;
                                                              ESP=Aplicacion fija] }
    { 85  ;   ;old_Tipo Ocupantes  ;Code10        ;TableRelation="Tipo elemento"."Tipo elemento" WHERE (Humano=CONST(Yes));
                                                   CaptionML=[ENU=Occupants type;
                                                              ESP=Tipo Ocupantes];
                                                   Description=FK Tipo elemento }
    { 87  ;   ;old_N§ Ocupantes    ;Integer       ;CaptionML=[ENU=Occupants No.;
                                                              ESP=N§ Ocupantes] }
    { 89  ;   ;N§ reservas aplicacion;Integer     ;CaptionML=[ENU=Application reservations No.;
                                                              ESP=N§ reservas aplicacion] }
    { 90  ;   ;Replicado           ;Boolean       ;InitValue=No;
                                                   OnValidate=BEGIN
                                                                Replicado:= FALSE;

                                                                IF rCVenta.GET(Delegacion,"N§ Contrato") THEN
                                                                   rCVenta.VALIDATE(Replicado);
                                                              END;

                                                   CaptionML=[ENU=Replicated;
                                                              ESP=Replicado];
                                                   Description=Campo usado por el replicador }
    { 91  ;   ;old_Aplicar tras AxB;Boolean       ;CaptionML=[ENU=Apply after AxB;
                                                              ESP=Aplicar tras AxB] }
    { 93  ;   ;C¢d. divisa         ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency code;
                                                              ESP=C¢d. divisa];
                                                   Description=FK Divisa }
    { 95  ;   ;2¦ Fecha desde      ;Date          ;OnValidate=BEGIN
                                                                IF "2¦ Fecha desde" <> xRec."2¦ Fecha desde" THEN
                                                                BEGIN
                                                                  IF "2¦ Fecha hasta" <> 0D THEN
                                                                  BEGIN
                                                                    IF "2¦ Fecha desde" > "2¦ Fecha hasta" THEN
                                                                      ERROR(Text024);
                                                                  END;

                                                                  IF ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+entrada") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+estancia") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+salida") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha entrada+salida") THEN
                                                                  BEGIN
                                                                    IF rConV.GET(Delegacion, "N§ Contrato") THEN
                                                                    BEGIN
                                                                      IF ("2¦ Fecha desde" < rConV."Fecha inicio contrato") OR ("2¦ Fecha desde" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text025);
                                                                    END;
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Compra", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("2¦ Fecha desde"), STRSUBSTNO('%1', "2¦ Fecha desde"),
                                                                                               STRSUBSTNO('%1', xRec."2¦ Fecha desde"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=2nd date from;
                                                              ESP=2¦ Fecha desde] }
    { 97  ;   ;2¦ Fecha hasta      ;Date          ;OnValidate=BEGIN
                                                                IF "2¦ Fecha hasta" <> xRec."2¦ Fecha hasta" THEN
                                                                BEGIN
                                                                  IF "2¦ Fecha desde" <> 0D THEN
                                                                  BEGIN
                                                                    IF "2¦ Fecha desde" > "2¦ Fecha hasta" THEN
                                                                      ERROR(Text024);
                                                                  END;

                                                                  IF ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+entrada") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+estancia") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha venta+salida") OR
                                                                     ("Tipo Fechas" = "Tipo Fechas"::"Fecha entrada+salida") THEN BEGIN
                                                                    IF rConV.GET(Delegacion, "N§ Contrato") THEN
                                                                    BEGIN
                                                                      IF ("2¦ Fecha hasta" < rConV."Fecha inicio contrato") OR
                                                                         ("2¦ Fecha hasta" > rConV."Fecha final contrato") THEN
                                                                        ERROR(Text026);
                                                                    END;
                                                                  END;

                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Compra", "Codigo Precio",
                                                                                               "Orden Precio", FIELDCAPTION("2¦ Fecha hasta"), STRSUBSTNO('%1', "2¦ Fecha hasta"),
                                                                                               STRSUBSTNO('%1', xRec."2¦ Fecha hasta"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=2nd date to;
                                                              ESP=2¦ Fecha hasta] }
    { 99  ;   ;Hotel oferta especial;Code20       ;OnValidate=BEGIN
                                                                rCVenta.RESET;
                                                                rCVenta.GET(Delegacion, "N§ Contrato");

                                                                rConvHotel.RESET;
                                                                IF NOT rConvHotel.GET('', rCVenta.TourOperador, "Hotel oferta especial") THEN
                                                                  ERROR(Text027);

                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Hotel oferta especial"), FORMAT("Hotel oferta especial"),
                                                                                             FORMAT(xRec."Hotel oferta especial"));
                                                              END;

                                                   OnLookup=BEGIN
                                                              rCVenta.RESET;
                                                              rCVenta.GET(Delegacion, "N§ Contrato");

                                                              rConvHotel.RESET;
                                                              rConvHotel.SETRANGE(TourOperador     , rCVenta.TourOperador);
                                                              rConvHotel.SETRANGE("Oferta de Hotel", TRUE);

                                                              CLEAR(fTabConvHotel);
                                                              fTabConvHotel.SETTABLEVIEW(rConvHotel);
                                                              fTabConvHotel.EDITABLE(FALSE);
                                                              fTabConvHotel.LOOKUPMODE(TRUE);

                                                              IF fTabConvHotel.RUNMODAL = ACTION::LookupOK THEN
                                                              BEGIN
                                                                fTabConvHotel.GETRECORD(rConvHotel);
                                                                "Hotel oferta especial" := rConvHotel."Hotel TO";

                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Hotel oferta especial"), FORMAT("Hotel oferta especial"),
                                                                                             FORMAT(xRec."Hotel oferta especial"));

                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Special offer hotel;
                                                              ESP=Hotel oferta especial] }
    { 101 ;   ;Aplica Lunes        ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Lunes"), FORMAT("Aplica Lunes"), FORMAT(xRec."Aplica Lunes"));
                                                              END;

                                                   CaptionML=[ENU=Apply Monday;
                                                              ESP=Aplica Lunes];
                                                   Description=$003 }
    { 103 ;   ;Aplica Martes       ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Martes"), FORMAT("Aplica Martes"), FORMAT(xRec."Aplica Martes"));
                                                              END;

                                                   CaptionML=[ENU=Apply Tuesday;
                                                              ESP=Aplica Martes];
                                                   Description=$003 }
    { 105 ;   ;Aplica Miercoles    ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Miercoles"), FORMAT("Aplica Miercoles"), FORMAT(xRec."Aplica Miercoles"));
                                                              END;

                                                   CaptionML=[ENU=Apply Wednesday;
                                                              ESP=Aplica Miercoles];
                                                   Description=$003 }
    { 107 ;   ;Aplica Jueves       ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Jueves"), FORMAT("Aplica Jueves"), FORMAT(xRec."Aplica Jueves"));
                                                              END;

                                                   CaptionML=[ENU=Apply Thursday;
                                                              ESP=Aplica Jueves];
                                                   Description=$003 }
    { 109 ;   ;Aplica Viernes      ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Viernes"), FORMAT("Aplica Viernes"), FORMAT(xRec."Aplica Viernes"));
                                                              END;

                                                   CaptionML=[ENU=Apply Friday;
                                                              ESP=Aplica Viernes];
                                                   Description=$003 }
    { 111 ;   ;Aplica Sabado       ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Sabado"), FORMAT("Aplica Sabado"), FORMAT(xRec."Aplica Sabado"));
                                                              END;

                                                   CaptionML=[ENU=Apply Saturday;
                                                              ESP=Aplica Sabado];
                                                   Description=$003 }
    { 113 ;   ;Aplica Domingo      ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica Domingo"), FORMAT("Aplica Domingo"), FORMAT(xRec."Aplica Domingo"));
                                                              END;

                                                   CaptionML=[ENU=Apply Sunday;
                                                              ESP=Aplica Domingo];
                                                   Description=$003 }
    { 115 ;   ;Aplicacion x dia    ;Boolean       ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Compra", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplicacion x dia"), FORMAT("Aplicacion x dia"), FORMAT(xRec."Aplicacion x dia"));
                                                              END;

                                                   CaptionML=[ENU=Apply x day;
                                                              ESP=Aplicacion x dia];
                                                   Description=$003, Para las ofertas que se aplican en funcion del dia de la semana }
    { 121 ;   ;Noches gratis       ;Integer       ;OnValidate=BEGIN
                                                                IF "Noches gratis" <> 0 THEN
                                                                BEGIN
                                                                  VALIDATE(Importe            , 0);
                                                                  VALIDATE(Porcentaje         , FALSE);
                                                                  VALIDATE("Acumular al total", FALSE);
                                                                END;

                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Noches gratis"), FORMAT("Noches gratis"),
                                                                                             FORMAT(xRec."Noches gratis") );
                                                              END;

                                                   CaptionML=[ENU=Nights for free;
                                                              ESP=Noches gratis];
                                                   Description=$003 }
    { 122 ;   ;Aplica noches gratis al;Option     ;OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica noches gratis al"), FORMAT("Aplica noches gratis al"),
                                                                                             FORMAT(xRec."Aplica noches gratis al") );
                                                              END;

                                                   CaptionML=[ENU=Apply nights for free to;
                                                              ESP=Aplica noches gratis al];
                                                   OptionCaptionML=[ENU=End of stay,Beginning of stay;
                                                                    ESP=Final estancia,Principio estancia];
                                                   OptionString=Final estancia,Principio estancia;
                                                   Description=$003 }
    { 123 ;   ;Hasta numero estancias;Integer     ;OnValidate=BEGIN
                                                                IF "Hasta numero estancias" <> 0 THEN
                                                                  IF "A partir de estancias" > "Hasta numero estancias" THEN
                                                                    ERROR(Text036);

                                                                IF "Hasta numero estancias" <> xRec."Hasta numero estancias" THEN
                                                                  cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                               FIELDCAPTION("Hasta numero estancias"), FORMAT("Hasta numero estancias"),
                                                                                               FORMAT(xRec."Hasta numero estancias") );
                                                              END;

                                                   CaptionML=[ENU=Since stays number;
                                                              ESP=Hasta numero estancias];
                                                   Description=$003 }
    { 124 ;   ;Aplica sobre primera estancia;Boolean;
                                                   OnValidate=BEGIN
                                                                cPar.intro_historico_precios(Delegacion, "N§ Contrato", rHis.Tipo::"Hotel Venta", "Codigo Precio", "Orden Precio",
                                                                                             FIELDCAPTION("Aplica sobre primera estancia"), FORMAT("Aplica sobre primera estancia"),
                                                                                             FORMAT(xRec."Aplica sobre primera estancia"));
                                                              END;

                                                   CaptionML=[ENU=Apply on first stay;
                                                              ESP=Aplica sobre primera estancia];
                                                   Description=$003, Solo para Extras, solo se aplica sobre la primera estancia de la reserva. }
    { 140 ;   ;Subtipo Oferta      ;Option        ;CaptionML=[ENU=Offer Subtype;
                                                              ESP=Subtipo Oferta];
                                                   OptionCaptionML=[ENU=",EBB,SPO,Arrival,Free Night,DA=DZ";
                                                                    ESP=",EBB,SPO,Llegada,Free Night,DA=DZ"];
                                                   OptionString=,EBB,SPO,Llegada,Free Night,DA=DZ;
                                                   BlankZero=Yes;
                                                   Description=$003;
                                                   Editable=No }
    { 141 ;   ;Descripcion venta   ;Text250       ;CaptionML=[ENU=Sale Description;
                                                              ESP=Descripcion venta] }
    { 142 ;   ;Categoria oferta CAVAL;Code10      ;CaptionML=[ENU=CAVAL Offer category;
                                                              ESP=Categoria oferta CAVAL] }
  }
  KEYS
  {
    {    ;Delegacion,N§ Contrato,Codigo Precio,Orden Precio;
                                                   Clustered=Yes }
    {    ;Delegacion,N§ Contrato,Codigo Precio,Codigo,Fecha desde,Fecha hasta,Edad desde,Edad hasta;
                                                   KeyGroups=RENUMERING }
    {    ;Delegacion,N§ Contrato,Codigo Precio,Fecha desde,Fecha hasta;
                                                   KeyGroups=RENUMERING }
    { No ;N§ Contrato                              }
    { No ;Codigo Precio,N§ Contrato                }
    {    ;Replicado                               ;KeyGroups=RENUMERING }
    {    ;Delegacion,N§ Contrato,Codigo Precio,old_Aplicar tras AxB,N§ Persona;
                                                   KeyGroups=RENUMERING }
    {    ;Delegacion,N§ Contrato,Codigo Precio,Activo;
                                                   KeyGroups=RENUMERING }
    {    ;Delegacion,N§ Contrato,Orden Precio      }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text000@1103355016 : TextConst 'ENU=Agency parameters folder does not exist;ESP=No existe el fichero de Parametros de la Agencia.';
      Text001@1103355017 : TextConst 'ENU=Only can enter sale prices\;ESP=Solo se pueden dar de alta precios de venta\';
      Text002@1103355018 : TextConst 'ENU=in the local offices;ESP=en las delegaciones.';
      Text003@1103355019 : TextConst 'ENU=Only can modify sale prices\;ESP=Solo se pueden modificar precios de venta\';
      Text004@1103355020 : TextConst 'ENU=Only can cancel sale prices\;ESP=Solo se pueden dar de baja precios de venta\';
      Text006@1103355022 : TextConst 'ENU=FUN-ACT-COV;ESP=FUN-ACT-COV';
      Text008@1103355024 : TextConst 'ENU=Deleted;ESP=Borrado';
      Text009@1103355025 : TextConst 'ENU=Deleted register;ESP=Borrado registro';
      Text010@1103355026 : TextConst 'ENU=<Number>;ESP=<Number>';
      Text011@1103355027 : TextConst 'ENU=Only can rename sale prices\;ESP=Solo se pueden renombrar precios de venta\';
      Text012@1103355028 : TextConst 'ENU=Board %1 does not exist;ESP=No existe el regimen %1.';
      Text013@1103355029 : TextConst 'ENU=Room code %1 does not exist;ESP=No existe el codigo de habitacion %1';
      Text014@1103355030 : TextConst 'ENU=Incorrect person type;ESP=Tipo de persona incorrecto.';
      Text015@1103355031 : TextConst 'ENU=%1 extras code does not exist;ESP=No existe el codigo de extras %1.';
      Text016@1103355032 : TextConst 'ENU=Date to must be higher than date from.;ESP=La fecha hasta debe ser posterior a la fecha desde.';
      Text017@1103355033 : TextConst 'ENU=Date from is out of the range of the contract;ESP=La fecha desde esta fuera de los rangos del contrato.';
      Text018@1103355034 : TextConst 'ENU=Date to is out of the range of the contract;ESP=La fecha hasta esta fuera de los rangos del contrato.';
      Text019@1103355035 : TextConst 'ENU=Room code %1 does not exist;ESP=No existe el codigo de Habitacion %1.';
      Text020@1103355036 : TextConst 'ENU=Unable to indicate an age lower than 0 years;ESP=No puede indicar una edad menor de 0 a¤os.';
      Text021@1103355037 : TextConst 'ENU=Unable to indicate an age higher than 120 years;ESP=No puede indicar una edad mayor de 120 a¤os.';
      Text022@1103355038 : TextConst 'ENU=Age to must be after age from;ESP=La edad hasta debe ser posterior a la edad desde.';
      Text023@1103355039 : TextConst 'ENU=Unable to indicate "Stays No." and "From" the same time;ESP=No se puede indicar "N§ estancias" y "A partir de" al mismo tiempo.';
      Text024@1103355040 : TextConst 'ENU=The 2nd date from must be after than the 2nd date to;ESP=La 2¦ fecha hasta debe ser posterior a la 2¦ fecha desde.';
      Text025@1103355041 : TextConst 'ENU=the 2nd date from is out of the ranges of the contract.;ESP=La 2¦ fecha desde esta fuera de los rangos del contrato.';
      Text026@1103355042 : TextConst 'ENU=the 2nd date to is out of the ranges of the contract.;ESP=La 2¦ fecha hasta esta fuera de los rangos del contrato.';
      Text027@1103355043 : TextConst 'ENU=This special hotel code does not exist for the touroperator of the contract;ESP=No existe ese codigo de hotel especial para el touroperador del contrato.';
      Text028@1103355044 : TextConst 'ENU=Unique application;ESP=Aplicacion unica';
      Text029@1103355045 : TextConst 'ENU=Daily application;ESP=Aplicacion diaria';
      Text030@1103355046 : TextConst 'ENU=Application every %1 days;ESP=Aplicacion cada %1 dias';
      Text031@1103355047 : TextConst 'ENU=Application every %1 weeks;ESP=Aplicacion cada %1 semanas';
      rParPer@1103355002 : Record 7009701;
      rPreVen@1103355003 : Record 7009732;
      rConHab@1103355004 : Record 7009731;
      rParAge@1103355005 : Record 7009700;
      rReg@1103355006 : Record 7009712;
      rCodExt@1103355007 : Record 7009760;
      rConV@1103355008 : Record 7009727;
      rHis@1103355009 : Record 7009765;
      rTipoEle@1103355010 : Record 7009715;
      rConvHotel@1103355011 : Record 7009725;
      cPar@1103355012 : Codeunit 7009700;
      cCon@1103355013 : Codeunit 7009701;
      cFunSeg@1100253000 : Codeunit 7009751;
      rCVenta@1103355014 : Record 7009727;
      fTabConvHotel@1103355015 : Form 7009733;
      Text036@1100217000 : TextConst 'ENU=The stays range is not correct.;ESP=El rango de estancias es incorrecto.';

    PROCEDURE activar_precio@1();
    BEGIN
      CASE "Codigo Precio" OF
        "Codigo Precio"::Habitacion:
        BEGIN
          Activo := cCon.activar_precio_venta(Rec);
        END;
        "Codigo Precio"::Regimen:
        BEGIN
          Activo := cCon.activar_precio_venta(Rec);
        END;
        "Codigo Precio"::Suplementos:
        BEGIN
          Activo := cCon.activar_suplemento_venta(Rec);
        END;
        "Codigo Precio"::Extras:
        BEGIN
          Activo := cCon.activar_suplemento_venta(Rec);
        END;
        "Codigo Precio"::Ofertas:
        BEGIN
          Activo := cCon.activar_oferta_precio_venta(Rec);
        END;
        "Codigo Precio"::AxB:
        BEGIN
          Activo := cCon.activar_precio_venta(Rec);
        END;
      END;
    END;

    PROCEDURE texto_frecuencia@2() : Text[30];
    BEGIN
      CASE Frecuencia OF
        0: EXIT(Text028);
        1: EXIT(Text029);
        2,3,4,5,8,9,10,11,12,13,15,16,17,18,19,20,
        22,23,24,25,26,27,28,29: EXIT(STRSUBSTNO(Text030, Frecuencia));
        7,14,21: EXIT(STRSUBSTNO(Text031, Frecuencia/7));
      END;
    END;

    PROCEDURE InsertaLinAction@1103355000();
    VAR
      lwRec@1103355000 : RecordRef;
      lcFunExp@1103355001 : Codeunit 7009911;
    BEGIN
      // InsertaLinAction
      // Inserta una linea para el borrado de la sincronizacion a la empresa Hotel Payment

      lwRec.GETTABLE(Rec);
      lcFunExp.InsertaLinAct(lwRec);
    END;

    BEGIN
    {
      $002 AJS 04062014 La numeraci¢n de los precios no debe tener en cuenta el campo Codigo precio

      $003 AJS 24062014 Nuevos campos para la integracion con SIAR

      $004 AJS 24062014 Desaparecen las ofertas AxB como un tipo especial ahora se integran en las ofertas precio

      $005 AJS 24062014 Las ofertas se enlazan con la tabla de definicion de ofertas

      $006 AJS 24062014 Marco como obsoletos los campos "Aplicar tras AxB", "Tipo Ocupantes" y "N§ Ocupantes"

      $007 AJS 01072014 QNT-CAR-14001, Nuevo campo "Descripcion venta" para utilizar en regimenes y ofertas

      $008 AJS 01072014 QNT-CAR-14001, Nuevo campo "Categoria oferta CAVAL"
    }
    END.
  }
}
