OBJECT Form 7010495 Consulta margenes - 2
{
  OBJECT-PROPERTIES
  {
    Date=27/11/14;
    Time=16:42:24;
    Modified=Yes;
    Version List=TRANSFER;
  }
  PROPERTIES
  {
    Width=22990;
    Height=14960;
    CaptionML=ESP=Consulta margenes - 2;
    InsertAllowed=No;
    DeleteAllowed=No;
    TableBoxID=1100244000;
    SourceTable=Table7010365;
    UpdateOnActivate=Yes;
    OnOpenForm=BEGIN
                 rErr.RESET;
                 rErr.SETRANGE("N§ Parte", w_parte);
                 rErr.SETRANGE(Tipo      , rErr.Tipo::Error);
                 IF rErr.FINDFIRST THEN
                   CurrForm.texto_error.VISIBLE := TRUE
                 ELSE
                   CurrForm.texto_error.VISIBLE := FALSE;
               END;

  }
  CONTROLS
  {
    { 1100244000;TableBox;220 ;2750 ;22550;2860 ;HorzGlue=Both;
                                                 VertGlue=Top;
                                                 HeadingHeight=880 }
    { 1100244017;TextBox;0    ;0    ;2530 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Cliente estadistico" }
    { 1100244018;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244017;
                                                 InColumnHeading=Yes }
    { 1100253000;TextBox;2540 ;4510 ;2530 ;440  ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Cliente operativo" }
    { 1100253001;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100253000;
                                                 InColumnHeading=Yes }
    { 1100244001;TextBox;0    ;0    ;2573 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr=Touroperador }
    { 1100244002;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244001;
                                                 InColumnHeading=Yes }
    { 1100244003;TextBox;0    ;0    ;1210 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Adultos transportados" }
    { 1100244004;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244003;
                                                 InColumnHeading=Yes }
    { 1100244005;TextBox;0    ;0    ;1100 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Ni¤os transportados" }
    { 1100244006;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244005;
                                                 InColumnHeading=Yes }
    { 1100244007;TextBox;0    ;0    ;1309 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 CaptionML=ESP=AD invit. ingreso;
                                                 SourceExpr="Adultos invitados ingreso" }
    { 1100244008;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244007;
                                                 InColumnHeading=Yes }
    { 1100244009;TextBox;0    ;0    ;1320 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 CaptionML=ESP=NI invit. ingreso;
                                                 SourceExpr="Ni¤os invitados ingreso" }
    { 1100244010;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244009;
                                                 InColumnHeading=Yes }
    { 1100244011;TextBox;0    ;0    ;1320 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 CaptionML=ESP=AD invit. coste;
                                                 SourceExpr="Adultos invitados coste" }
    { 1100244012;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244011;
                                                 InColumnHeading=Yes }
    { 1100244013;TextBox;0    ;0    ;1210 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 CaptionML=ESP=NI invit. coste;
                                                 SourceExpr="Ni¤os invitados coste" }
    { 1100244014;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244013;
                                                 InColumnHeading=Yes }
    { 1100244015;TextBox;0    ;0    ;2090 ;0    ;ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Ingreso Precios Por" }
    { 1100244016;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244015;
                                                 InColumnHeading=Yes }
    { 1100244043;TextBox;17277;2640 ;1980 ;440  ;ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Precio manual venta" }
    { 1100244044;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244043;
                                                 InColumnHeading=Yes }
    { 1100244062;TextBox;18706;3300 ;4400 ;440  ;ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Concepto facturacion" }
    { 1100244063;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244062;
                                                 InColumnHeading=Yes }
    { 1100244045;TextBox;18997;2750 ;1980 ;440  ;ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="Precio manual compra" }
    { 1100244046;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244045;
                                                 InColumnHeading=Yes }
    { 1100244019;TextBox;0    ;0    ;1870 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="N§ Contrato venta" }
    { 1100244020;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244019;
                                                 InColumnHeading=Yes }
    { 1100244021;TextBox;0    ;0    ;1980 ;0    ;Editable=No;
                                                 ParentControl=1100244000;
                                                 InColumn=Yes;
                                                 SourceExpr="N§ Contrato compra" }
    { 1100244022;Label  ;0    ;0    ;0    ;0    ;ParentControl=1100244021;
                                                 InColumnHeading=Yes }
    { 1100244023;CommandButton;8030;14190;2200;550;
                                                 HorzGlue=Right;
                                                 VertGlue=Bottom;
                                                 Default=Yes;
                                                 PushAction=LookupOK;
                                                 InvalidActionAppearance=Hide }
    { 1100244024;CommandButton;10450;14190;2200;550;
                                                 HorzGlue=Right;
                                                 VertGlue=Bottom;
                                                 Cancel=Yes;
                                                 PushAction=LookupCancel;
                                                 InvalidActionAppearance=Hide }
    { 1100244025;CommandButton;20570;14190;2200;550;
                                                 HorzGlue=Right;
                                                 VertGlue=Bottom;
                                                 PushAction=FormHelp }
    { 1100244026;SubForm;220  ;6050 ;22550;3740 ;Name=Margen1;
                                                 HorzGlue=Both;
                                                 VertGlue=Both;
                                                 SubFormID=Form7010496;
                                                 SubFormView=SORTING(Usuario,N§ Parte,N§ Linea);
                                                 SubFormLink=N§ Parte=FIELD(N§ Parte) }
    { 1100244027;Label  ;220  ;2310 ;22550;440  ;HorzGlue=Both;
                                                 HorzAlign=Center;
                                                 ForeColor=16777215;
                                                 BackColor=8421504;
                                                 BackTransparent=No;
                                                 Border=Yes;
                                                 BorderStyle=BumpDown;
                                                 FontBold=Yes;
                                                 LeaderDots=No;
                                                 CaptionML=ESP=Touroperadores x Parte }
    { 1100244028;Label  ;220  ;5610 ;22550;440  ;HorzGlue=Both;
                                                 VertGlue=Top;
                                                 HorzAlign=Center;
                                                 ForeColor=16777215;
                                                 BackColor=8421504;
                                                 BackTransparent=No;
                                                 Border=Yes;
                                                 BorderStyle=BumpDown;
                                                 FontBold=Yes;
                                                 LeaderDots=No;
                                                 CaptionML=ESP=Margenes }
    { 1100244029;Label  ;220  ;9790 ;22550;440  ;HorzGlue=Both;
                                                 VertGlue=Bottom;
                                                 HorzAlign=Center;
                                                 ForeColor=16777215;
                                                 BackColor=8421504;
                                                 BackTransparent=No;
                                                 Border=Yes;
                                                 BorderStyle=BumpDown;
                                                 FontBold=Yes;
                                                 LeaderDots=No;
                                                 CaptionML=ESP=Costes - Ingresos }
    { 1100244030;SubForm;220  ;10230;22550;3740 ;HorzGlue=Both;
                                                 VertGlue=Bottom;
                                                 SubFormID=Form7010483;
                                                 SubFormView=SORTING(N§ Parte,N§ Linea);
                                                 SubFormLink=N§ Parte=FIELD(N§ Parte) }
    { 1100244031;TabControl;220;220 ;22550;1980 ;HorzGlue=Both;
                                                 Focusable=No }
    { 1100244032;TextBox;2640 ;990  ;2310 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Garaje;
                                                 SourceExpr=GarajeParte }
    { 1100244033;Label  ;440  ;990  ;2090 ;440  ;ParentControl=1100244032;
                                                 InPage=0 }
    { 1100244035;TextBox;7370 ;990  ;2200 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Num Parte;
                                                 SourceExpr=NumParte }
    { 1100244036;Label  ;5170 ;990  ;2090 ;440  ;ParentControl=1100244035;
                                                 InPage=0 }
    { 1100244037;TextBox;11990;990  ;1980 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Codigo servicio;
                                                 SourceExpr=ServicioParte }
    { 1100244038;Label  ;9790 ;990  ;2090 ;440  ;ParentControl=1100244037;
                                                 InPage=0 }
    { 1100244034;TextBox;16390;990  ;1700 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Fecha;
                                                 SourceExpr=FechaParte }
    { 1100244039;Label  ;14190;990  ;2090 ;440  ;ParentControl=1100244034;
                                                 InPage=0 }
    { 1100244041;TextBox;20460;990  ;1700 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Tipo vehiculo;
                                                 SourceExpr=TipoVehParte }
    { 1100244040;Label  ;18260;990  ;2090 ;440  ;ParentControl=1100244041;
                                                 InPage=0 }
    { 1100244056;TextBox;2640 ;1540 ;2310 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Origen/Destino;
                                                 SourceExpr=OrigenParte }
    { 1100244057;Label  ;440  ;1540 ;2090 ;440  ;ParentControl=1100244056 }
    { 1100244059;TextBox;7370 ;1540 ;6600 ;440  ;ParentControl=1100244031;
                                                 InPage=0;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Referencia;
                                                 SourceExpr=ReferenciaParte }
    { 1100244060;Label  ;5170 ;1540 ;2090 ;440  ;ParentControl=1100244059 }
    { 1100244042;Label  ;220  ;14190;6270 ;550  ;Name=texto_error;
                                                 VertGlue=Bottom;
                                                 Visible=No;
                                                 HorzAlign=Center;
                                                 ForeColor=255;
                                                 FontSize=12;
                                                 FontBold=Yes;
                                                 LeaderDots=No;
                                                 CaptionML=ESP=ERRORES ENCONTRADOS }
    { 1100244047;MenuButton;18150;14190;2200;550;HorzGlue=Right;
                                                 VertGlue=Bottom;
                                                 CaptionML=ESP=&Margenes;
                                                 Menu=MENUITEMS
                                                 {
                                                   { ID=1100244048;
                                                     PushAction=RunObject;
                                                     ShortCutKey=Ctrl+R;
                                                     CaptionML=ESP=Errores;
                                                     RunObject=Form 7010474;
                                                     RunFormView=SORTING(N§ Parte,N§ Error);
                                                     RunFormLink=N§ Parte=FIELD(N§ Parte) }
                                                   { ID=1100244049;
                                                     CaptionML=ESP=Contratos Venta;
                                                     OnPush=VAR
                                                              lrContVent@1100244001 : Record 7010403;
                                                              lfConsContPart@1100244002 : Form 7010481;
                                                              lrParte@1100244004 : Record 7010360;
                                                              lrTTOOParte@1100244005 : Record 7010365;
                                                              lrPar@1100244006 : Record 7010311;
                                                            BEGIN
                                                              // Ense¤a los contratos de venta posibles para la linea actual

                                                              lrPar.FINDFIRST;

                                                              lrContVent.RESET;
                                                              lrContVent.FILTERGROUP(2);
                                                              lrContVent.SETRANGE(Cliente , "Cliente estadistico");
                                                              lrContVent.SETRANGE(Confirmado , TRUE);
                                                              lrContVent.SETFILTER("Fecha inicio contrato", '<= %1' , "Fecha Facturacion");
                                                              lrContVent.SETFILTER("Fecha final contrato" , '>= %1' , "Fecha Facturacion");

                                                              // Selecciona contratos de los touroperadores del parte

                                                              lrContVent.RESET;

                                                              lrTTOOParte.RESET;
                                                              lrTTOOParte.COPY(Rec);
                                                              IF lrTTOOParte.FINDSET THEN BEGIN
                                                                REPEAT
                                                                  lrContVent.SETFILTER(Garaje      , '%1|%2', lrTTOOParte.Garaje, lrPar."Todos los garajes");
                                                                  lrContVent.SETRANGE("N§ Contrato", lrTTOOParte."N§ Contrato venta");
                                                                  IF lrContVent.FINDFIRST THEN
                                                                    lrContVent.MARK (TRUE);
                                                                  lrContVent.SETRANGE(Garaje);
                                                                  lrContVent.SETRANGE("N§ Contrato");
                                                                UNTIL lrTTOOParte.NEXT = 0;
                                                              END;

                                                              lrContVent.MARKEDONLY(TRUE);
                                                              lrContVent.FILTERGROUP(0);

                                                              CLEAR(lfConsContPart);
                                                              lfConsContPart.SETTABLEVIEW(lrContVent);
                                                              // Se coloca sobre el registro del contrato actual
                                                              IF (Garaje<>'') AND ("N§ Contrato venta" <> '') THEN BEGIN
                                                                IF lrContVent.GET(Garaje , "N§ Contrato venta") THEN
                                                                  lfConsContPart.SETRECORD(lrContVent);
                                                                END;
                                                              lfConsContPart.DefMargen(Rec);
                                                              lfConsContPart.RUNMODAL;
                                                            END;
                                                             }
                                                   { ID=1100244050;
                                                     CaptionML=ESP=Contratos Compra;
                                                     OnPush=VAR
                                                              lrContComp@1100244001 : Record 7010408;
                                                              lfTablaContComp@1100244002 : Form 7010438;
                                                              lrParte@1100244004 : Record 7010360;
                                                              lrTTOOParte@1100244005 : Record 7010365;
                                                            BEGIN
                                                              // Ense¤a los contratos de compra posibles para la linea actual

                                                              rPar.FINDFIRST;

                                                              lrContComp.RESET;
                                                              lrContComp.SETCURRENTKEY(Proveedor,
                                                                                         Cliente,
                                                                                    Touroperador,
                                                                           "Fecha inicio contrato",
                                                                           "Fecha final contrato");
                                                              lrContComp.FILTERGROUP(2);

                                                              // AJS 29.06.2004
                                                              // Los contratos de compra seran genericos por proveedor en Transunion

                                                              CASE rPar."Empresa Real" OF
                                                                rPar."Empresa Real"::TRN, rPar."Empresa Real"::CNT:
                                                                BEGIN

                                                                  // TRN no filtra por cliente
                                                                END
                                                                ELSE
                                                                  lrContComp.SETRANGE(Cliente , "Cliente operativo");
                                                              END;

                                                              IF NOT rParte.GET("N§ Parte") THEN
                                                                CLEAR(rParte);

                                                              lrContComp.SETRANGE(Confirmado              , TRUE);
                                                              lrContComp.SETFILTER("Fecha inicio contrato", '<= %1' , "Fecha Facturacion");
                                                              lrContComp.SETFILTER("Fecha final contrato" , '>= %1' , "Fecha Facturacion");
                                                              lrContComp.SETRANGE (Proveedor              , rParte.Proveedor);

                                                              // Selecciona los contratos de los touroperadores del parte

                                                              lrContComp.RESET;

                                                              lrTTOOParte.RESET;
                                                              lrTTOOParte.COPY(Rec);
                                                              IF lrTTOOParte.FINDSET THEN BEGIN
                                                                REPEAT
                                                                  lrContComp.SETFILTER(Garaje      , '%1|%2', lrTTOOParte.Garaje, rPar."Todos los garajes");
                                                                  lrContComp.SETRANGE("N§ Contrato", lrTTOOParte."N§ Contrato compra");
                                                                  IF lrContComp.FINDFIRST THEN
                                                                    lrContComp.MARK (TRUE);
                                                                UNTIL lrTTOOParte.NEXT = 0;
                                                              END;

                                                              lrContComp.MARKEDONLY(TRUE);
                                                              lrContComp.FILTERGROUP(0);

                                                              CLEAR(lfTablaContComp);
                                                              lfTablaContComp.SETTABLEVIEW(lrContComp);
                                                              // Se coloca sobre el registro del contrato actual
                                                              IF (Garaje<>'') AND ("N§ Contrato compra"<>'') THEN BEGIN
                                                                IF lrContComp.GET(Garaje , "N§ Contrato compra") THEN
                                                                  lfTablaContComp.SETRECORD(lrContComp);
                                                              END;

                                                              lfTablaContComp.EDITABLE(FALSE);
                                                              lfTablaContComp.RUNMODAL;
                                                            END;
                                                             }
                                                   { ID=1100244051;
                                                     MenuItemType=Separator;
                                                     CaptionML=ESP="" }
                                                   { ID=1100244052;
                                                     ShortCutKey=F9;
                                                     CaptionML=ESP=Totalizar;
                                                     OnPush=VAR
                                                              lrDiv@1100244001 : Record 4;
                                                              rMar@1100244002 : Record 7010412;
                                                              ventana@1100244003 : Dialog;
                                                              w_ingreso@1100244004 : Decimal;
                                                              w_ingreso_sin@1100244005 : Decimal;
                                                              w_coste@1100244006 : Decimal;
                                                              w_coste_sin@1100244007 : Decimal;
                                                              w_coste_suplemento@1100244008 : Decimal;
                                                              w_coste_suplemento_sin@1100244009 : Decimal;
                                                              w_ingreso_suplemento@1100244010 : Decimal;
                                                              w_ingreso_suplemento_sin@1100244011 : Decimal;
                                                              w_beneficio@1100244012 : Decimal;
                                                              w_porcen@1100244013 : Decimal;
                                                              w_text1@1100244014 : Text[30];
                                                            BEGIN
                                                              lrDiv.RESET;
                                                              IF NOT lrDiv.GET("Cod. Divisa venta") THEN
                                                                CLEAR(lrDiv);

                                                              rMar.RESET; rMar.INIT;
                                                              rMar.SETCURRENTKEY(Usuario,
                                                                                 "N§ Parte",
                                                                                 Touroperador,
                                                                                 Concepto);
                                                              rMar.SETRANGE(Usuario     , USERID);
                                                              rMar.SETRANGE("N§ Parte"  , "N§ Parte");
                                                              rMar.SETRANGE(Concepto    , rMar.Concepto::Ingreso);
                                                              rMar.SETRANGE("Tipo linea", rMar."Tipo linea"::Base);
                                                              rMar.CALCSUMS("Importe con impuesto", "Importe sin impuesto");
                                                              w_ingreso     := ROUND(rMar."Importe con impuesto", lrDiv."Amount Rounding Precision");
                                                              w_ingreso_sin := ROUND(rMar."Importe sin impuesto", lrDiv."Amount Rounding Precision");

                                                              rMar.SETFILTER("Tipo linea", '<>%1', rMar."Tipo linea"::Base);
                                                              rMar.CALCSUMS("Importe con impuesto", "Importe sin impuesto");
                                                              w_ingreso_suplemento     := ROUND(rMar."Importe con impuesto", lrDiv."Amount Rounding Precision");
                                                              w_ingreso_suplemento_sin := ROUND(rMar."Importe sin impuesto", lrDiv."Amount Rounding Precision");

                                                              rMar.SETRANGE(Concepto    , rMar.Concepto::Coste);
                                                              rMar.SETRANGE("Tipo linea", rMar."Tipo linea"::Base);
                                                              rMar.CALCSUMS("Importe con impuesto", "Importe sin impuesto");
                                                              w_coste     := ROUND(rMar."Importe con impuesto", lrDiv."Amount Rounding Precision");
                                                              w_coste_sin := ROUND(rMar."Importe sin impuesto", lrDiv."Amount Rounding Precision");

                                                              rMar.SETFILTER("Tipo linea", '<>%1', rMar."Tipo linea"::Base);
                                                              rMar.CALCSUMS("Importe con impuesto", "Importe sin impuesto");
                                                              w_coste_suplemento     := ROUND(rMar."Importe con impuesto", lrDiv."Amount Rounding Precision");
                                                              w_coste_suplemento_sin := ROUND(rMar."Importe sin impuesto", lrDiv."Amount Rounding Precision");

                                                              w_beneficio := (w_ingreso + w_ingreso_suplemento) - (w_coste + w_coste_suplemento);
                                                              w_porcen := ROUND((w_beneficio * 100) / (w_ingreso + w_ingreso_suplemento), 0.01);

                                                              ventana.OPEN(Text000 +
                                                                           '\' +
                                                                           Text001 +
                                                                           Text002 +
                                                                           Text003 +
                                                                           Text004 +
                                                                           '\' +
                                                                           Text005 +
                                                                           '\' +
                                                                           '#5###############');
                                                              ventana.UPDATE(1, w_coste_sin);
                                                              ventana.UPDATE(6, w_coste);
                                                              ventana.UPDATE(7, w_coste_suplemento_sin);
                                                              ventana.UPDATE(8, w_coste_suplemento);
                                                              ventana.UPDATE(2, w_ingreso_sin);
                                                              ventana.UPDATE(9, w_ingreso);
                                                              ventana.UPDATE(10, w_ingreso_suplemento_sin);
                                                              ventana.UPDATE(11, w_ingreso_suplemento);
                                                              ventana.UPDATE(3, w_beneficio);
                                                              ventana.UPDATE(4, w_porcen);
                                                              w_text1 := text1;
                                                              ventana.INPUT(5, w_text1);
                                                              ventana.CLOSE;
                                                            END;
                                                             }
                                                   { ID=1100244064;
                                                     ShortCutKey=Ctrl+F9;
                                                     CaptionML=ESP=Recalcular parte;
                                                     OnPush=BEGIN
                                                              IF rParte.GET("N§ Parte") THEN BEGIN
                                                                rParte."Tipo Calculo" := rParte."Tipo Calculo"::Margen;
                                                                rParte.MODIFY(TRUE);
                                                                COMMIT;
                                                                // JPT 27/12/05 Cambio a las nuevas funciones de calculo
                                                                // cCal.calculo_parte(rParte, FALSE, FALSE, FALSE,FALSE);
                                                                cCalR.CalculoParte(rParte, FALSE, FALSE, FALSE,FALSE, FALSE);
                                                                COMMIT;
                                                                CurrForm.Margen1.FORM.UPDATECONTROLS;
                                                              END;
                                                            END;
                                                             }
                                                   { ID=1100244053;
                                                     ShortCutKey=F11;
                                                     CaptionML=ESP=Confirmar Parte;
                                                     OnPush=BEGIN
                                                              rParte.RESET;
                                                              IF rParte.GET("N§ Parte") THEN BEGIN
                                                                rParte.SETRECFILTER;
                                                                //BRM 25/05/04 A¤adimos ultimo parametro para incluir tratamiento grupos
                                                                cFun.confirmar_partes(rParte, FALSE,'',0);
                                                              END;
                                                            END;
                                                             }
                                                 }
                                                  }
    { 1100244054;CommandButton;12980;14190;2530;550;
                                                 HorzGlue=Right;
                                                 VertGlue=Bottom;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 PushAction=RunObject;
                                                 CaptionML=ESP=&Zonas precio;
                                                 RunObject=Form 7010409;
                                                 RunFormLink=N§ Parte=FIELD(N§ Parte) }
    { 1100244055;CommandButton;15730;14190;2200;550;
                                                 HorzGlue=Right;
                                                 VertGlue=Bottom;
                                                 HorzAlign=Center;
                                                 FontBold=Yes;
                                                 PushAction=RunObject;
                                                 CaptionML=ESP=&Ficha parte;
                                                 RunObject=Form 7010400;
                                                 RunFormLink=N§ Parte=FIELD(N§ Parte) }
    { 1100244058;TextBox;16390;1540 ;5830 ;440  ;HorzAlign=Center;
                                                 FontBold=Yes;
                                                 CaptionML=ESP=Vuelos;
                                                 SourceExpr=VuelosParte }
    { 1100244061;Label  ;14190;1540 ;2090 ;440  ;ParentControl=1100244058 }
  }
  CODE
  {
    VAR
      rErr@1100244000 : Record 7010413;
      rPar@1100244004 : Record 7010311;
      rParte@1100244003 : Record 7010360;
      cFun@1100244002 : Codeunit 7010318;
      cCalR@1100253000 : Codeunit 7010407;
      w_parte@1100244001 : Code[20];
      Text000@1100244011 : TextConst 'ESP=LOS MARGENES DE ESTE PARTE SON\';
      Text001@1100244010 : TextConst 'ESP=COSTE       #1######## #6########\';
      Text002@1100244009 : TextConst 'ESP=SUPLEMENTOS #7######## #8########\';
      Text003@1100244008 : TextConst 'ESP=INGRESO     #2######## #9########\';
      Text004@1100244007 : TextConst 'ESP=SUPLEMENTOS #10####### #11#######\';
      Text005@1100244006 : TextConst 'ESP=BENEFICIO   #3######## #4####% \';
      text1@1100244005 : TextConst 'ESP=Intro para seguir';

    PROCEDURE GarajeParte@1100244000() : Code[10];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // GarajeParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte.Garaje);

      EXIT('');
    END;

    PROCEDURE NumParte@1100244001() : Code[10];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // NumParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte."N§ Parte");

      EXIT('');
    END;

    PROCEDURE ServicioParte@1100244002() : Code[10];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // ServicioParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte."Codigo Servicio");

      EXIT('');
    END;

    PROCEDURE FechaParte@1100244003() : Date;
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // FechaParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte.Fecha);

      EXIT(0D);
    END;

    PROCEDURE TipoVehParte@1100244005() : Code[10];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // TipoVehParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte."Tipo Vehiculo");

      EXIT('');
    END;

    PROCEDURE OrigenParte@1100244004() : Code[10];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // OrigenParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte."Origen/Destino");

      EXIT('');
    END;

    PROCEDURE ReferenciaParte@1100244006() : Text[30];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // ReferenciaParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte.Referencia);

      EXIT('');
    END;

    PROCEDURE VuelosParte@1100244007() : Text[150];
    VAR
      lrParte@1100244000 : Record 7010360;
    BEGIN
      // VuelosParte
      //
      IF lrParte.GET("N§ Parte") THEN
        EXIT(lrParte.Vuelos);

      EXIT('');
    END;

    PROCEDURE pasa_parte@1(pw_parte@1100244000 : Code[20]);
    BEGIN
      // pasa_parte
      //

      w_parte := pw_parte;
    END;

    BEGIN
    END.
  }
}
