OBJECT Report 7009750 Documento fact compras - Test
{
  OBJECT-PROPERTIES
  {
    Date=02/10/12;
    Time=12:00:00;
    Modified=Yes;
    Version List=AIC2009,GOC;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Purchase document inv - Test;
               ESP=Documento fact compras - Test];
    OnInitReport=BEGIN
                   ConfCG.GET;
                 END;

    OnPreReport=BEGIN
                  FiltroCabCompra := "Purch. Inv. Header".GETFILTERS;
                END;

  }
  DATAITEMS
  {
    { PROPERTIES
      {
        DataItemTable=Table122;
        NewPagePerRecord=Yes;
        ReqFilterHeadingML=[ENU=Purchase document;
                            ESP=Documento compra];
        OnPreDataItem=BEGIN
                        TextoRecibirFactur := Text000;
                      END;

        OnAfterGetRecord=BEGIN
                           FormatDire.PurchInvPayTo(PagarADir,"Purch. Inv. Header");
                           FormatDire.PurchInvBuyFrom(DirFactProv,"Purch. Inv. Header");
                           FormatDire.PurchInvShipTo(EnvADir,"Purch. Inv. Header");
                           IF "Currency Code" = '' THEN BEGIN
                             ConfCG.TESTFIELD("LCY Code");
                             TotalTexto := STRSUBSTNO(Text001,ConfCG."LCY Code");
                             TextoTotIVAIncl := STRSUBSTNO(Text002,ConfCG."LCY Code");
                           END ELSE BEGIN
                             TotalTexto := STRSUBSTNO(Text001,"Currency Code");
                             TextoTotIVAIncl := STRSUBSTNO(Text002,"Currency Code");
                           END;

                           //Factura := FactEnSigRegitro;
                           //Recibir := RecibirEnSigSoliReg;

                           IF "Buy-from Vendor No." = '' THEN
                             SumError(STRSUBSTNO(Text003,FIELDCAPTION("Buy-from Vendor No.")))
                           ELSE BEGIN
                             IF Prov.GET("Buy-from Vendor No.") THEN BEGIN
                               IF Prov.Blocked = Prov.Blocked::All THEN
                                 SumError(
                                   STRSUBSTNO(
                                     Text004,
                                     Prov.FIELDCAPTION(Blocked),FALSE,Prov.TABLECAPTION,"Buy-from Vendor No."));
                             END ELSE
                               SumError(
                                 STRSUBSTNO(
                                   Text005,
                                   Prov.TABLECAPTION,"Buy-from Vendor No."));
                           END;

                           IF "Pay-to Vendor No." = '' THEN
                             SumError(STRSUBSTNO(Text003,FIELDCAPTION("Pay-to Vendor No.")))
                           ELSE BEGIN
                             IF Prov.GET("Pay-to Vendor No.") THEN BEGIN
                               IF Prov.Blocked = Prov.Blocked::All THEN
                                 SumError(
                                   STRSUBSTNO(
                                     Text004,
                                     Prov.FIELDCAPTION(Blocked),FALSE,Prov.TABLECAPTION,"Pay-to Vendor No."));
                             END ELSE
                               SumError(
                                 STRSUBSTNO(
                                   Text005,
                                   Prov.TABLECAPTION,"Pay-to Vendor No."));
                           END;

                           ConfComp.GET;
                           ConfCG.GET;

                           IF "Posting Date" = 0D THEN
                             SumError(STRSUBSTNO(Text003,FIELDCAPTION("Posting Date")))
                           ELSE
                             IF "Posting Date" <> NORMALDATE("Posting Date") THEN
                               SumError(STRSUBSTNO(Text006,FIELDCAPTION("Posting Date")))
                             ELSE BEGIN
                               IF (RegistDesdeFecha = 0D) AND (RegiHastaFecha = 0D) THEN BEGIN
                                 IF USERID <> '' THEN
                                   IF ConfUsuar.GET(USERID) THEN BEGIN
                                     RegistDesdeFecha := ConfUsuar."Allow Posting From";
                                     RegiHastaFecha := ConfUsuar."Allow Posting To";
                                   END;
                                 IF (RegistDesdeFecha = 0D) AND (RegiHastaFecha = 0D) THEN BEGIN
                                   RegistDesdeFecha := ConfCG."Allow Posting From";
                                   RegiHastaFecha := ConfCG."Allow Posting To";
                                 END;
                                 IF RegiHastaFecha = 0D THEN
                                   RegiHastaFecha := 31129999D;
                               END;
                               IF ("Posting Date" < RegistDesdeFecha) OR ("Posting Date" > RegiHastaFecha) THEN
                                 SumError(STRSUBSTNO(Text007,FIELDCAPTION("Posting Date")));
                             END;

                           IF ("Document Date" <> 0D) THEN
                             IF ("Document Date" <> NORMALDATE("Document Date")) THEN
                               SumError(STRSUBSTNO(Text006,FIELDCAPTION("Document Date")));
                         END;

        ReqFilterFields=No.;
      }
      SECTIONS
      {
      }
       }
    { PROPERTIES
      {
        DataItemIndent=1;
        DataItemTable=Table2000000026;
        DataItemTableView=SORTING(Number)
                          WHERE(Number=CONST(1));
        DataItemVarName=NumeraPags;
      }
      SECTIONS
      {
        { PROPERTIES
          {
            SectionType=Header;
            PrintOnEveryPage=Yes;
            SectionWidth=18150;
            SectionHeight=1692;
          }
          CONTROLS
          {
            { 1   ;Label        ;0    ;0    ;7500 ;423  ;FontSize=8;
                                                         FontBold=Yes;
                                                         CaptionML=[ENU=Purchase document - Test;
                                                                    ESP=Documento compras - Test] }
            { 2   ;TextBox      ;15000;0    ;3150 ;423  ;HorzAlign=Right;
                                                         SourceExpr=FORMAT(TODAY,0,4) }
            { 3   ;TextBox      ;0    ;423  ;7500 ;423  ;SourceExpr=COMPANYNAME }
            { 4   ;Label        ;16950;423  ;750  ;423  ;ParentControl=5 }
            { 5   ;TextBox      ;17700;423  ;450  ;423  ;CaptionML=[ENU=Page;
                                                                    ESP=P g.];
                                                         SourceExpr=CurrReport.PAGENO }
            { 6   ;TextBox      ;15900;846  ;2250 ;423  ;HorzAlign=Right;
                                                         SourceExpr=USERID }
          }
           }
        { PROPERTIES
          {
            SectionType=Header;
            PrintOnEveryPage=Yes;
            SectionWidth=18150;
            SectionHeight=423;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT((CurrReport.PAGENO = 1) AND (FiltroCabCompra <> ''));
                         END;

          }
          CONTROLS
          {
            { 7   ;TextBox      ;0    ;0    ;18150;423  ;SourceExpr=Text008 + FiltroCabCompra }
          }
           }
        { PROPERTIES
          {
            SectionType=Header;
            SectionWidth=18150;
            SectionHeight=423;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT := (CurrReport.PAGENO = 1) AND (TextoRecibirFactur <> '');
                         END;

          }
          CONTROLS
          {
            { 9   ;TextBox      ;0    ;0    ;7500 ;423  ;SourceExpr=TextoRecibirFactur }
          }
           }
        { PROPERTIES
          {
            SectionType=Header;
            SectionWidth=18150;
            SectionHeight=423;
          }
          CONTROLS
          {
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=5499;
            KeepWithNext=No;
          }
          CONTROLS
          {
            { 12  ;Label        ;7950 ;423  ;3000 ;423  ;ParentControl=13 }
            { 13  ;TextBox      ;11100;423  ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Sell-to Customer No." }
            { 120 ;TextBox      ;7950 ;1692 ;4500 ;423  ;SourceExpr=EnvADir[1] }
            { 121 ;TextBox      ;7950 ;2115 ;4500 ;423  ;SourceExpr=EnvADir[2] }
            { 122 ;TextBox      ;7950 ;2538 ;4500 ;423  ;SourceExpr=EnvADir[3] }
            { 123 ;TextBox      ;7950 ;2961 ;4500 ;423  ;SourceExpr=EnvADir[4] }
            { 124 ;TextBox      ;7950 ;3384 ;4500 ;423  ;SourceExpr=EnvADir[5] }
            { 125 ;TextBox      ;7950 ;3807 ;4500 ;423  ;SourceExpr=EnvADir[6] }
            { 126 ;TextBox      ;7950 ;4230 ;4500 ;423  ;SourceExpr=EnvADir[7] }
            { 127 ;TextBox      ;7950 ;4653 ;4500 ;423  ;SourceExpr=EnvADir[8] }
            { 135 ;Label        ;7950 ;1269 ;4500 ;423  ;FontBold=Yes;
                                                         CaptionML=[ENU=Send-to;
                                                                    ESP=Env¡o-a] }
            { 8   ;TextBox      ;0    ;0    ;4500 ;423  ;FontBold=Yes;
                                                         SourceExpr=Text009 + "Purch. Inv. Header"."No." }
            { 99  ;TextBox      ;0    ;4653 ;4500 ;423  ;SourceExpr=DirFactProv[8] }
            { 148 ;TextBox      ;0    ;4230 ;4500 ;423  ;SourceExpr=DirFactProv[7] }
            { 149 ;TextBox      ;0    ;3807 ;4500 ;423  ;SourceExpr=DirFactProv[6] }
            { 152 ;TextBox      ;0    ;3384 ;4500 ;423  ;SourceExpr=DirFactProv[5] }
            { 156 ;TextBox      ;0    ;2961 ;4500 ;423  ;SourceExpr=DirFactProv[4] }
            { 157 ;TextBox      ;0    ;2538 ;4500 ;423  ;SourceExpr=DirFactProv[3] }
            { 158 ;TextBox      ;0    ;2115 ;4500 ;423  ;SourceExpr=DirFactProv[2] }
            { 159 ;TextBox      ;0    ;1692 ;4500 ;423  ;SourceExpr=DirFactProv[1] }
            { 160 ;Label        ;0    ;1269 ;4500 ;423  ;FontBold=Yes;
                                                         CaptionML=[ENU=Purchase-to;
                                                                    ESP=Compra-a] }
            { 43  ;TextBox      ;3150 ;423  ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Buy-from Vendor No." }
            { 42  ;Label        ;0    ;423  ;3000 ;423  ;ParentControl=43 }
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=5076;
            KeepWithNext=No;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT :=
                             NOT ("Purch. Inv. Header"."Pay-to Vendor No." IN ['',"Purch. Inv. Header"."Buy-from Vendor No."]);
                         END;

          }
          CONTROLS
          {
            { 134 ;Label        ;0    ;0    ;4500 ;423  ;FontBold=Yes;
                                                         CaptionML=[ENU=Payment to-;
                                                                    ESP=Pago a-] }
            { 29  ;TextBox      ;0    ;1269 ;4500 ;423  ;SourceExpr=PagarADir[1] }
            { 28  ;TextBox      ;0    ;1692 ;4500 ;423  ;SourceExpr=PagarADir[2] }
            { 25  ;TextBox      ;0    ;2115 ;4500 ;423  ;SourceExpr=PagarADir[3] }
            { 24  ;TextBox      ;0    ;2538 ;4500 ;423  ;SourceExpr=PagarADir[4] }
            { 21  ;TextBox      ;0    ;2961 ;4500 ;423  ;SourceExpr=PagarADir[5] }
            { 20  ;TextBox      ;0    ;3384 ;4500 ;423  ;SourceExpr=PagarADir[6] }
            { 17  ;TextBox      ;0    ;3807 ;4500 ;423  ;SourceExpr=PagarADir[7] }
            { 16  ;TextBox      ;0    ;4230 ;4500 ;423  ;SourceExpr=PagarADir[8] }
            { 11  ;TextBox      ;3150 ;423  ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Pay-to Vendor No." }
            { 10  ;Label        ;0    ;423  ;3000 ;423  ;ParentControl=11 }
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=846;
            KeepWithNext=No;
          }
          CONTROLS
          {
            { 41  ;TextBox      ;11100;0    ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Purchaser Code" }
            { 40  ;Label        ;7950 ;0    ;3000 ;423  ;ParentControl=41 }
            { 39  ;TextBox      ;3150 ;0    ;4500 ;423  ;SourceExpr="Purch. Inv. Header"."Your Reference" }
            { 38  ;Label        ;0    ;0    ;3000 ;423  ;ParentControl=39 }
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=1269;
            KeepWithNext=No;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT := FALSE;
                         END;

          }
          CONTROLS
          {
            { 51  ;TextBox      ;3150 ;0    ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Vendor Posting Group" }
            { 50  ;Label        ;0    ;0    ;3000 ;423  ;ParentControl=51 }
            { 49  ;TextBox      ;11100;423  ;1200 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Posting Date" }
            { 48  ;Label        ;7950 ;423  ;3000 ;423  ;ParentControl=49 }
            { 116 ;TextBox      ;11100;0    ;1200 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Document Date" }
            { 117 ;Label        ;7950 ;0    ;3000 ;423  ;ParentControl=116 }
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=3807;
            KeepWithNext=No;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT := TRUE;
                         END;

          }
          CONTROLS
          {
            { 14  ;TextBox      ;3150 ;2115 ;900  ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Payment Discount %" }
            { 15  ;Label        ;0    ;2115 ;3000 ;423  ;ParentControl=14 }
            { 18  ;TextBox      ;3150 ;846  ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Payment Terms Code" }
            { 19  ;TextBox      ;3150 ;1269 ;1200 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Due Date" }
            { 22  ;TextBox      ;3150 ;1692 ;1200 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Pmt. Discount Date" }
            { 23  ;Label        ;0    ;846  ;3000 ;423  ;ParentControl=18 }
            { 26  ;Label        ;0    ;1269 ;3000 ;423  ;ParentControl=19 }
            { 27  ;Label        ;0    ;1692 ;3000 ;423  ;ParentControl=22 }
            { 30  ;TextBox      ;3150 ;2538 ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Payment Method Code" }
            { 31  ;Label        ;0    ;2538 ;3000 ;423  ;ParentControl=30 }
            { 32  ;Label        ;0    ;2961 ;3000 ;423  ;ParentControl=33 }
            { 33  ;TextBox      ;3150 ;2961 ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Shipment Method Code" }
            { 35  ;TextBox      ;11100;1692 ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Vendor Invoice No." }
            { 37  ;Label        ;7950 ;1692 ;3000 ;423  ;ParentControl=35 }
            { 110 ;TextBox      ;3150 ;0    ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Vendor Posting Group" }
            { 111 ;Label        ;0    ;0    ;3000 ;423  ;ParentControl=110 }
            { 112 ;TextBox      ;11100;423  ;1200 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Posting Date" }
            { 113 ;TextBox      ;11100;0    ;1200 ;423  ;HorzAlign=Left;
                                                         SourceExpr="Purch. Inv. Header"."Document Date" }
            { 114 ;Label        ;7950 ;423  ;3000 ;423  ;ParentControl=112 }
            { 115 ;Label        ;7950 ;0    ;3000 ;423  ;ParentControl=113 }
            { 1103355000;TextBox;11100;2538 ;6900 ;423  ;HorzAlign=Left;
                                                         CaptionML=[ENU=Fiscal receipt;
                                                                    ESP=Comprobante fiscal];
                                                         SourceExpr="Purch. Inv. Header"."Comprobante Fiscal" }
            { 1103355001;Label  ;7950 ;2538 ;3000 ;423  ;ParentControl=1103355000 }
          }
           }
      }
       }
    { PROPERTIES
      {
        DataItemIndent=2;
        DataItemTable=Table2000000026;
        DataItemTableView=SORTING(Number);
        DataItemVarName=ContadorErrorCab;
        OnPreDataItem=BEGIN
                        SETRANGE(Number,1,ErrorContador);
                      END;

        OnPostDataItem=BEGIN
                         ErrorContador := 0;
                       END;

      }
      SECTIONS
      {
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=423;
          }
          CONTROLS
          {
            { 74  ;Label        ;0    ;0    ;1500 ;423  ;ParentControl=75;
                                                         FontBold=Yes }
            { 75  ;TextBox      ;1650 ;0    ;16500;423  ;CaptionML=[ENU=Warning!;
                                                                    ESP=­Aviso!];
                                                         SourceExpr=ErrorTexto[Number] }
          }
           }
      }
       }
    { PROPERTIES
      {
        DataItemIndent=2;
        DataItemTable=Table123;
        DataItemTableView=SORTING(Document No.,Line No.);
        OnPreDataItem=BEGIN
                        LinImporIVA.DELETEALL;
                        CurrReport.CREATETOTALS(Amount,"Amount Including VAT","Line Discount Amount","Pmt. Disc. Rcd. Amount");
                      END;

        OnAfterGetRecord=BEGIN
                           IF ConfRegistroIVA.GET("Purch. Inv. Line"."VAT Bus. Posting Group",
                                                  "Purch. Inv. Line"."VAT Prod. Posting Group") THEN
                             IF ConfRegistroIVA."VAT+EC %" <> 0 THEN BEGIN
                               LinImporIVA.INIT;
                               LinImporIVA."VAT %"             := ConfRegistroIVA."VAT %";
                               LinImporIVA."EC %"              := ConfRegistroIVA."EC %";
                               LinImporIVA."VAT+EC Base"       := "Purch. Inv. Line".Amount;
                               LinImporIVA."Amount Including VAT+EC" := "Purch. Inv. Line"."Amount Including VAT";
                               LinImporIVA.InsertLine;
                             END;

                           IF "Gen. Prod. Posting Group" <> '' THEN BEGIN
                             CLEAR(ConfGrupContabl);
                             ConfGrupContabl.RESET;
                             ConfGrupContabl.SETRANGE("Gen. Bus. Posting Group","Gen. Bus. Posting Group");
                             ConfGrupContabl.SETRANGE("Gen. Prod. Posting Group","Gen. Prod. Posting Group");
                             IF NOT ConfGrupContabl.FIND('+') THEN
                               SumError(
                                 STRSUBSTNO(
                                   Text010,
                                   ConfGrupContabl.TABLECAPTION,"Gen. Bus. Posting Group","Gen. Prod. Posting Group"));
                           END;

                           IF Quantity <> 0 THEN BEGIN
                             IF "No." = '' THEN
                               SumError(STRSUBSTNO(Text003,FIELDCAPTION("No.")));
                             IF Type = 0 THEN
                               SumError(STRSUBSTNO(Text003,FIELDCAPTION(Type)));
                           END ELSE
                             IF Amount <> 0 THEN
                               SumError(STRSUBSTNO(Text011,FIELDCAPTION(Amount),FIELDCAPTION(Quantity)));

                           LinCompra := "Purch. Inv. Line";

                           CASE Type OF
                             Type::"G/L Account":
                               BEGIN
                                 IF ("No." = '') AND (Amount = 0) THEN
                                   EXIT;

                                 IF "No." <> '' THEN
                                   IF CGCta.GET("No.") THEN BEGIN
                                     IF CGCta.Blocked THEN
                                       SumError(
                                         STRSUBSTNO(
                                           Text004,
                                           CGCta.FIELDCAPTION(Blocked),FALSE,CGCta.TABLECAPTION,"No."));
                                     IF NOT CGCta."Direct Posting" THEN
                                       SumError(
                                         STRSUBSTNO(
                                           Text004,
                                           CGCta.FIELDCAPTION("Direct Posting"),TRUE,CGCta.TABLECAPTION,"No."));
                                   END ELSE
                                     SumError(
                                       STRSUBSTNO(
                                         Text005,
                                         CGCta.TABLECAPTION,"No."));
                               END;
                             Type::Item:
                               BEGIN
                                 IF ("No." = '') AND (Quantity = 0) THEN
                                   EXIT;

                                 IF "No." <> '' THEN
                                   IF Producto.GET("No.") THEN BEGIN
                                     IF Producto.Blocked THEN
                                       SumError(
                                         STRSUBSTNO(
                                           Text004,
                                           Producto.FIELDCAPTION(Blocked),FALSE,Producto.TABLECAPTION,"No."));
                                   END ELSE
                                     SumError(
                                       STRSUBSTNO(
                                         Text005,
                                         Producto.TABLECAPTION,"No."));
                               END;
                             Type::"Fixed Asset":
                               BEGIN
                                 IF ("No." = '') AND (Quantity = 0) THEN
                                   EXIT;

                                 IF "No." <> '' THEN
                                   IF AF.GET("No.") THEN BEGIN
                                     IF AF.Blocked THEN
                                       SumError(
                                         STRSUBSTNO(
                                           Text004,
                                           AF.FIELDCAPTION(Blocked),FALSE,AF.TABLECAPTION,"No."));
                                     IF AF.Inactive THEN
                                       SumError(
                                         STRSUBSTNO(
                                           Text004,
                                           AF.FIELDCAPTION(Inactive),FALSE,AF.TABLECAPTION,"No."));
                                   END ELSE
                                     SumError(
                                       STRSUBSTNO(
                                         Text005,
                                         AF.TABLECAPTION,"No."));
                               END;
                           END;
                         END;

        DataItemLinkReference=Purch. Inv. Header;
        DataItemLink=Document No.=FIELD(No.);
      }
      SECTIONS
      {
        { PROPERTIES
          {
            SectionType=Header;
            PrintOnEveryPage=Yes;
            SectionWidth=18150;
            SectionHeight=1269;
          }
          CONTROLS
          {
            { 76  ;Label        ;0    ;423  ;2250 ;846  ;ParentControl=86;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 77  ;Label        ;2400 ;423  ;1500 ;846  ;ParentControl=87;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 78  ;Label        ;4050 ;423  ;5400 ;846  ;ParentControl=88;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 79  ;Label        ;9600 ;423  ;1050 ;846  ;ParentControl=89;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 82  ;Label        ;10800;423  ;1500 ;846  ;ParentControl=92;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 83  ;Label        ;12450;423  ;900  ;846  ;ParentControl=93;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 84  ;Label        ;13500;423  ;1800 ;846  ;ParentControl=94;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=423;
          }
          CONTROLS
          {
            { 86  ;TextBox      ;0    ;0    ;2250 ;423  ;SourceExpr=Type }
            { 87  ;TextBox      ;2400 ;0    ;1500 ;423  ;HorzAlign=Left;
                                                         SourceExpr="No." }
            { 88  ;TextBox      ;4050 ;0    ;5400 ;423  ;SourceExpr=Description }
            { 89  ;TextBox      ;9600 ;0    ;1050 ;423  ;BlankZero=Yes;
                                                         SourceExpr=Quantity }
            { 92  ;TextBox      ;10800;0    ;1500 ;423  ;BlankZero=Yes;
                                                         SourceExpr="Direct Unit Cost";
                                                         AutoFormatType=2;
                                                         AutoFormatExpr=GetCurrencyCode }
            { 93  ;TextBox      ;12450;0    ;900  ;423  ;CaptionML=[ENU=% Line disc.;
                                                                    ESP=% Dto. l¡nea];
                                                         BlankZero=Yes;
                                                         SourceExpr="Line Discount %" }
            { 94  ;TextBox      ;13500;0    ;1800 ;423  ;CaptionML=[ENU=Amount;
                                                                    ESP=Importe];
                                                         BlankZero=Yes;
                                                         SourceExpr=Amount+"Inv. Discount Amount"+"Pmt. Disc. Rcd. Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr=GetCurrencyCode }
          }
           }
        { PROPERTIES
          {
            SectionType=Footer;
            SectionWidth=18150;
            SectionHeight=423;
          }
          CONTROLS
          {
          }
           }
        { PROPERTIES
          {
            SectionType=Footer;
            SectionWidth=18150;
            SectionHeight=423;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT("Inv. Discount Amount" <> 0);
                         END;

          }
          CONTROLS
          {
            { 96  ;Label        ;10350;0    ;3000 ;423  ;ParentControl=97 }
            { 97  ;TextBox      ;13500;0    ;1800 ;423  ;SourceExpr="Inv. Discount Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr=GetCurrencyCode }
          }
           }
        { PROPERTIES
          {
            SectionType=Footer;
            SectionWidth=18150;
            SectionHeight=423;
            OnPreSection=BEGIN
                           CurrReport.SHOWOUTPUT("Pmt. Disc. Rcd. Amount" <> 0);
                         END;

          }
          CONTROLS
          {
            { 168 ;TextBox      ;13500;0    ;1800 ;423  ;SourceExpr="Pmt. Disc. Rcd. Amount" }
            { 169 ;Label        ;10350;0    ;3000 ;423  ;ParentControl=168 }
          }
           }
        { PROPERTIES
          {
            SectionType=Footer;
            SectionWidth=18150;
            SectionHeight=2115;
          }
          CONTROLS
          {
            { 100 ;TextBox      ;13500;0    ;1800 ;423  ;FontBold=Yes;
                                                         SourceExpr=Amount;
                                                         AutoFormatType=1;
                                                         AutoFormatExpr=GetCurrencyCode }
            { 101 ;TextBox      ;13500;846  ;1800 ;423  ;FontBold=Yes;
                                                         SourceExpr="Amount Including VAT";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr=GetCurrencyCode }
            { 153 ;TextBox      ;10350;0    ;3000 ;423  ;FontBold=Yes;
                                                         SourceExpr=TotalTexto }
            { 155 ;TextBox      ;10350;846  ;3000 ;423  ;FontBold=Yes;
                                                         SourceExpr=TextoTotIVAIncl }
            { 150 ;TextBox      ;13500;423  ;1800 ;423  ;SourceExpr="Amount Including VAT" - Amount;
                                                         AutoFormatType=1;
                                                         AutoFormatExpr=GetCurrencyCode }
            { 151 ;Label        ;10350;423  ;3000 ;423  ;FontSize=7;
                                                         CaptionML=[ENU=Ampunt VAT+ER;
                                                                    ESP=Importe IVA+RE] }
          }
           }
      }
       }
    { PROPERTIES
      {
        DataItemIndent=3;
        DataItemTable=Table2000000026;
        DataItemTableView=SORTING(Number);
        DataItemVarName=ContadorErrorLin;
        OnPreDataItem=BEGIN
                        SETRANGE(Number,1,ErrorContador);
                      END;

        OnPostDataItem=BEGIN
                         ErrorContador := 0;
                       END;

      }
      SECTIONS
      {
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=423;
          }
          CONTROLS
          {
            { 102 ;Label        ;0    ;0    ;1500 ;423  ;ParentControl=103;
                                                         FontBold=Yes }
            { 103 ;TextBox      ;1650 ;0    ;16500;423  ;CaptionML=[ENU=Warning!;
                                                                    ESP=­Aviso!];
                                                         SourceExpr=ErrorTexto[Number] }
          }
           }
      }
       }
    { PROPERTIES
      {
        DataItemIndent=2;
        DataItemTable=Table2000000026;
        DataItemTableView=SORTING(Number);
        DataItemVarName=ContadorIVA;
        OnPreDataItem=BEGIN
                        IF LinImporIVA.COUNT < 1 THEN
                          CurrReport.BREAK;
                        SETRANGE(Number,1,LinImporIVA.COUNT);
                        CurrReport.CREATETOTALS(LinImporIVA."VAT+EC Base",LinImporIVA."VAT Amount",LinImporIVA."EC Amount");
                      END;

        OnAfterGetRecord=BEGIN
                           LinImporIVA.GetLine(Number);
                         END;

      }
      SECTIONS
      {
        { PROPERTIES
          {
            SectionType=Header;
            PrintOnEveryPage=Yes;
            SectionWidth=18150;
            SectionHeight=2115;
          }
          CONTROLS
          {
            { 154 ;Label        ;0    ;0    ;4500 ;423  ;FontBold=Yes;
                                                         CaptionML=[ENU=Especify tax amount;
                                                                    ESP=Especificar importe IVA] }
            { 141 ;Label        ;5250 ;846  ;1800 ;846  ;ParentControl=98;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 142 ;Label        ;3300 ;846  ;1800 ;846  ;ParentControl=138;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 147 ;Label        ;0    ;846  ;1500 ;846  ;ParentControl=146;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 161 ;Label        ;1650 ;846  ;1500 ;846  ;ParentControl=164;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
            { 162 ;Label        ;7200 ;846  ;1800 ;846  ;ParentControl=165;
                                                         HorzAlign=Right;
                                                         VertAlign=Bottom;
                                                         FontBold=Yes;
                                                         MultiLine=Yes }
          }
           }
        { PROPERTIES
          {
            SectionType=TransHeader;
            SectionWidth=18150;
            SectionHeight=846;
          }
          CONTROLS
          {
            { 136 ;TextBox      ;5250 ;0    ;1800 ;423  ;SourceExpr=LinImporIVA."VAT Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 140 ;TextBox      ;3300 ;0    ;1800 ;423  ;CaptionML=[ENU=Sum;
                                                                    ESP=Suma];
                                                         SourceExpr=LinImporIVA."VAT+EC Base";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 145 ;Label        ;0    ;0    ;1500 ;423  ;ParentControl=140;
                                                         LeaderDots=Yes }
            { 163 ;TextBox      ;7200 ;0    ;1800 ;423  ;SourceExpr=LinImporIVA."EC Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
          }
           }
        { PROPERTIES
          {
            SectionType=Body;
            SectionWidth=18150;
            SectionHeight=846;
          }
          CONTROLS
          {
            { 98  ;TextBox      ;5250 ;0    ;1800 ;423  ;CaptionML=[ENU=VAT Amount;
                                                                    ESP=Importe IVA];
                                                         SourceExpr=LinImporIVA."VAT Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 138 ;TextBox      ;3300 ;0    ;1800 ;423  ;CaptionML=[ENU=Base VAT+ER;
                                                                    ESP=Base IVA+RE];
                                                         SourceExpr=LinImporIVA."VAT+EC Base";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 146 ;TextBox      ;0    ;0    ;1500 ;423  ;CaptionML=[ENU=% VAT;
                                                                    ESP=% IVA];
                                                         SourceExpr=LinImporIVA."VAT %" }
            { 164 ;TextBox      ;1650 ;0    ;1500 ;423  ;CaptionML=[ENU=% ER;
                                                                    ESP=% RE];
                                                         SourceExpr=LinImporIVA."EC %" }
            { 165 ;TextBox      ;7200 ;0    ;1800 ;423  ;CaptionML=[ENU=Amount ER;
                                                                    ESP=Importe RE];
                                                         SourceExpr=LinImporIVA."EC Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
          }
           }
        { PROPERTIES
          {
            SectionType=TransFooter;
            SectionWidth=18150;
            SectionHeight=846;
          }
          CONTROLS
          {
            { 95  ;TextBox      ;5250 ;423  ;1800 ;423  ;SourceExpr=LinImporIVA."VAT Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 139 ;TextBox      ;3300 ;423  ;1800 ;423  ;CaptionML=[ENU=Sum;
                                                                    ESP=Suma];
                                                         SourceExpr=LinImporIVA."VAT+EC Base";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 144 ;Label        ;0    ;423  ;1500 ;423  ;ParentControl=139;
                                                         LeaderDots=Yes }
            { 166 ;TextBox      ;7200 ;423  ;1800 ;423  ;SourceExpr=LinImporIVA."EC Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
          }
           }
        { PROPERTIES
          {
            SectionType=Footer;
            SectionWidth=18150;
            SectionHeight=846;
          }
          CONTROLS
          {
            { 85  ;TextBox      ;5250 ;423  ;1800 ;423  ;FontBold=Yes;
                                                         SourceExpr=LinImporIVA."VAT Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 137 ;TextBox      ;3300 ;423  ;1800 ;423  ;FontBold=Yes;
                                                         CaptionML=[ENU=Total;
                                                                    ESP=Total];
                                                         SourceExpr=LinImporIVA."VAT+EC Base";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
            { 143 ;Label        ;0    ;423  ;1500 ;423  ;ParentControl=137;
                                                         FontBold=Yes }
            { 167 ;TextBox      ;7200 ;423  ;1800 ;423  ;FontBold=Yes;
                                                         SourceExpr=LinImporIVA."EC Amount";
                                                         AutoFormatType=1;
                                                         AutoFormatExpr="Purch. Inv. Header"."Currency Code" }
          }
           }
      }
       }
  }
  REQUESTFORM
  {
    PROPERTIES
    {
      Width=3850;
      Height=1540;
      CaptionML=[ENU=Purchase document inv - Test;
                 ESP=Documento fact compras - Test];
      SaveValues=Yes;
      OnOpenForm=BEGIN
                   IF NOT RecibirEnSigSoliReg AND NOT FactEnSigRegitro THEN BEGIN
                     RecibirEnSigSoliReg := TRUE;
                     FactEnSigRegitro := TRUE;
                   END;
                 END;

    }
    CONTROLS
    {
      { 3   ;Label        ;0    ;0    ;3300 ;440  ;ParentControl=7;
                                                   LeaderDots=No;
                                                   CaptionML=[ENU=Order register;
                                                              ESP=Registro pedido] }
      { 7   ;CheckBox     ;3410 ;550  ;440  ;440  ;ShowCaption=No;
                                                   CaptionML=[ENU=Receive;
                                                              ESP=Recibir];
                                                   SourceExpr=RecibirEnSigSoliReg;
                                                   OnValidate=BEGIN
                                                                IF NOT RecibirEnSigSoliReg THEN
                                                                  FactEnSigRegitro := TRUE;
                                                              END;
                                                               }
      { 8   ;Label        ;220  ;550  ;3080 ;440  ;ParentControl=7 }
      { 9   ;CheckBox     ;3410 ;1100 ;440  ;440  ;ShowCaption=No;
                                                   CaptionML=[ENU=Invoice;
                                                              ESP=Factura];
                                                   SourceExpr=FactEnSigRegitro;
                                                   OnValidate=BEGIN
                                                                IF NOT FactEnSigRegitro THEN
                                                                  RecibirEnSigSoliReg := TRUE;
                                                              END;
                                                               }
      { 10  ;Label        ;220  ;1100 ;3080 ;440  ;ParentControl=9 }
    }
  }
  REQUESTPAGE
  {
    PROPERTIES
    {
    }
    CONTROLS
    {
    }
  }
  CODE
  {
    VAR
      Text000@1103355034 : TextConst 'ENU=Invoice;ESP=Factura';
      Text001@1103355035 : TextConst 'ENU=Total %1;ESP=Total %1';
      Text002@1103355036 : TextConst 'ENU=Total %1 incl. VAT;ESP=Total %1 incl. IVA';
      Text003@1103355037 : TextConst 'ENU=Must indicate %1;ESP=Se debe indicar %1.';
      Text004@1103355038 : TextConst 'ENU=%1 must be %2 for %3 %4;ESP=%1 debe ser %2 para %3 %4.';
      Text005@1103355039 : TextConst 'ENU=%1 %2 do not exist;ESP=No existe %1 %2.';
      Text006@1103355040 : TextConst 'ENU=%1 cannot be a last date;ESP=%1 no puede ser una fecha £ltima.';
      Text007@1103355041 : TextConst 'ENU=%1 is not included in the range of dates of allowed registrations;ESP=%1 no est  incluida en el intervalo de fechas de registro permitidas.';
      Text008@1103355042 : TextConst 'ENU=Purchase document:;ESP=Documento compra:';
      Text009@1103355043 : TextConst 'ENU=Invoice;ESP=Factura';
      Text010@1103355044 : TextConst 'ENU=%1 %2 %3 do not exist;ESP=No existe %1 %2 %3.';
      Text011@1103355045 : TextConst 'ENU=%1 must be 0 when %2 is 0;ESP=%1 debe ser 0 cuando %2 es 0.';
      Text012@1103355046 : TextConst 'ENU=%1 must be completed when %2 is %3;ESP=%1 se debe completar cuando %2 es %3.';
      ConfComp@1103355000 : Record 312;
      ConfCG@1103355001 : Record 98;
      ConfUsuar@1103355002 : Record 91;
      Prov@1103355003 : Record 23;
      MovProv@1103355004 : Record 25;
      CabCompra@1103355005 : Record 122;
      LinCompra@1103355006 : Record 123;
      CGCta@1103355007 : Record 15;
      Producto@1103355008 : Record 27;
      AF@1103355009 : Record 5600;
      LinAlbaranCompra@1103355010 : Record 121;
      CabPedVta@1103355011 : Record 36;
      LinPedidoVenta@1103355012 : Record 37;
      ConfGrupContabl@1103355013 : Record 252;
      LinImporIVA@1103355014 : TEMPORARY Record 290;
      ConfRegistroIVA@1103355015 : Record 325;
      FormatDire@1103355016 : Codeunit 365;
      PagarADir@1103355017 : ARRAY [8] OF Text[50];
      DirFactProv@1103355018 : ARRAY [8] OF Text[50];
      EnvADir@1103355019 : ARRAY [8] OF Text[50];
      FiltroCabCompra@1103355020 : Text[250];
      FactEnSigRegitro@1103355021 : Boolean;
      RecibirEnSigSoliReg@1103355022 : Boolean;
      TextoRecibirFactur@1103355023 : Text[50];
      TotalTexto@1103355024 : Text[50];
      TextoTotIVAIncl@1103355025 : Text[50];
      RegistDesdeFecha@1103355026 : Date;
      RegiHastaFecha@1103355027 : Date;
      MaxCdadAFacturar@1103355028 : Decimal;
      CdadPndteAFacturar@1103355029 : Decimal;
      CdadAFacturar@1103355030 : Decimal;
      PedidoEnvDirecto@1103355031 : Boolean;
      ErrorContador@1103355032 : Integer;
      ErrorTexto@1103355033 : ARRAY [99] OF Text[250];

    LOCAL PROCEDURE SumError@1(Texto@1103355000 : Text[250]);
    BEGIN
      ErrorContador := ErrorContador + 1;
      ErrorTexto[ErrorContador] := Texto;
    END;

    BEGIN
    END.
  }
  RDLDATA
  {
  }
}
